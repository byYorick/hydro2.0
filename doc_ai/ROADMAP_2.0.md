# ROADMAP_2.0.md
Пошаговый план реализации системы **hydro2.0**.

Цель: довести систему от текущей проработанной архитектуры и документации до промышленно пригодной реализации с минимальным жизнеспособным продуктом (MVP), последующим расширением и масштабированием.

---

## Этап 0. Подготовка (текущее состояние)

**Цель:** зафиксировать архитектуру, договориться о правилах, подготовить основу для командной и ИИ-разработки.

### Шаги

1. Финализировать структуру документации 2.0
 - Актуализировать `SYSTEM_ARCH_FULL.md`, `LOGIC_ARCH.md`, `DATAFLOW_FULL.md`.
 - Убедиться, что все ноды и сервисы имеют отдельные спецификации (`*_FIRMWARE_SPEC.md`, `06_DOMAIN_ZONES_RECIPES/ZONE_CONTROLLER_FULL.md`, и т.п.).
2. Ввести конвенции разработки
 - Принять правила из `DEV_CONVENTIONS.md` (данный файл).
 - Согласовать формат MQTT-топиков и payload'ов (`03_TRANSPORT_MQTT/MQTT_SPEC_FULL.md`).
3. Определить MVP-срез
 - Выбрать минимальный набор нод и функционала для первой живой установки.

**Результат:** понятная архитектура, согласованные правила, готовый список для Этапа 1.

---

## Этап 1. MVP для одной теплицы/системы

**Цель:** одна теплица (или одна установка) полностью работает на hydro2.0: базовый контроль pH/EC, климат, освещение и полив, хранение данных и базовые рецепты.

### Минимальный набор для MVP

1. **Ноды**:
 - `ph_node` — измерение pH, калибровка, отображение состояния на OLED.
 - `ec_node` — измерение EC, температура раствора, OLED.
 - `climate_node` — температура/влажность воздуха, возможно CO₂, OLED.
 - `irrigation_node` — управление насосами/клапанами, счётчик поливов, аварии.
 - (опционально) `lighting_node` — управление светильниками по расписанию.
2. **Коммуникации**:
 - MQTT-брокер в локальной сети.
 - Устойчивое подключение нод к MQTT.
3. **Сервисный слой (Python)**:
 - Telemetry ingestor — приём и запись телеметрии в БД/TSDB.
 - Zone controller — логика включения/выключения полива/дозирования по простым правилам.
4. **Backend (Laravel)**:
 - Модель данных зон, нод, рецептов.
 - REST API для просмотра текущих значений и истории.
 - Авторизация (минимальная: один пользователь/учётка).
5. **Frontend / UI**:
 - Веб-панель с текущими значениями pH/EC/температуры/влажности и состоянием полива.
 - Просмотр истории в виде графиков.
6. **Android-приложение (минимально)**:
 - Авторизация и просмотр текущих значений по зонам.
7. **Эксплуатация**:
 - Базовый мониторинг и логи.
 - Резервное копирование БД.

### Критерий готовности Этапа 1

- Одна реальная установка (теплица/стеллаж) стабильно работает не менее 2–4 недель без критичных сбоев.
- Основные параметры (pH, EC, климат, полив) контролируются через систему, данные записываются и доступны в UI.
- Операции обслуживания (перезагрузка нод, замена/калибровка датчиков) описаны в документации.

---

## Этап 2. Расширение функционала и AI-надстройка

**Цель:** превратить MVP в удобную коммерческую систему для оператора/фермера с поддержкой ИИ-подсказок и предиктивных функций.

### Основные направления

1. **Расширение рецептов и логики зон**
 - Поддержка сложных рецептов: кривые pH/EC/климата во времени, разные стадии роста.
 - Шаблоны культур (салат, рукола, зелень, клубника и т.д.) с пресетами.
2. **Улучшение UI/UX**
 - Более подробные панели по зонам, сравнение зон между собой.
 - Уведомления об авариях (push, email, Telegram).
3. **AI и Digital Twin**
 - Реализация базового digital twin: симуляция влияния настроек на pH/EC/урожайность.
 - AI-подсказки: рекомендации по настройкам рецептов, раннее обнаружение отклонений.
 - Модели прогнозирования потребления воды/раствора, нагрузки на оборудование.
4. **Автоматизация с ИИ-агентами**
 - Подготовка и отладка задач для ИИ-агентов (см. `10_AI_DEV_GUIDES`).
 - Автоматическая генерация кода и конфигов по .md-спецификациям (с ручной проверкой).
5. **Укрепление безопасности и операций**
 - Ролевое управление доступом (RBAC).
 - Расширенный мониторинг (Grafana, алерты).
 - Улучшение резервного копирования и восстановления.

### Критерий готовности Этапа 2

- Система используется на 2–3 объектах (несколько теплиц/установок).
- AI-подсказки дают измеримую пользу (экономия времени/ресурсов, повышение урожайности).
- Есть стабильный процесс обновления системы (релизный цикл, changelog).

---

## Этап 3. Масштабирование и мультисайтовость

**Цель:** подготовить систему к эксплуатации на десятках/сотнях объектов с разделением по клиентам/фермам, высокой доступностью и расширяемостью.

### Основные задачи

1. **Мультитенантность и несколько площадок**
 - Разделение данных по фермам/клиентам (tenantId / siteId).
 - Управление доступом: разные пользователи и роли в рамках одного или нескольких объектов.
2. **Масштабирование инфраструктуры**
 - Отделение MQTT, БД, backend и фронта по сервисам.
 - Поддержка горизонтального масштабирования (несколько брокеров, шардирование БД при необходимости).
3. **Стандартизация и интеграции**
 - Поддержка стандартных протоколов и форматов (Modbus/TCP при необходимости, внешние API).
 - Экспорт данных в сторонние системы (BI, ERP, CRM).
4. **Продвинутая аналитика и отчётность**
 - Отчёты по урожайности, потреблению ресурсов, эффективности рецептов.
 - Дашборды для владельца бизнеса и агронома.

### Критерий готовности Этапа 3

- Система способна обслуживать десятки теплиц/объектов.
- Добавление нового объекта/фермы происходит по понятной инструкции и не требует ручной “магии”.
- Резервирование и отказоустойчивость протестированы (имитация падения брокера, БД, отдельных сервисов).

---

## Этап 4. Платформа и экосистема

**Цель:** превратить hydro2.0 в платформу, на базе которой можно строить новые решения (под разные культуры, регионы, бизнес-модели).

### Возможные направления развития

- Маркетплейс рецептов и пресетов (обмен между пользователями/агрономами).
- Поддержка стороннего железа и сенсоров через “адаптеры”.
- Плагинная архитектура для AI-модулей.
- Инструменты для партнёров и интеграторов (SDK, документация, sandbox).

---

## Практическое использование roadmap

- Для планирования спринтов/итераций:
 - задачи помечаются `stage:1`, `stage:2`, … по принадлежности к этапу;
 - сначала закрывается MVP-срез, потом функционал Этапа 2 и т.д.
- Для постановки задач ИИ-агентам:
 - всегда указывать, на каком этапе находится задача, и к каким файлам документации обращаться;
 - не давать ИИ выходить за рамки текущего этапа, если это не требуется.

Этот roadmap не жёсткий, но задаёт **скелет** развития: 
сначала — одна рабочая теплица, потом удобство и AI, затем — масштабирование и платформа.
