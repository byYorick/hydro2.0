{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "TelemetrySample",
  "description": "Canonical telemetry sample payload for internal ingestion",
  "type": "object",
  "required": ["sensor_id", "ts", "value"],
  "properties": {
    "sensor_id": {
      "type": "integer",
      "description": "Sensor identity (FK to sensors.id)"
    },
    "ts": {
      "type": "string",
      "format": "date-time",
      "description": "Sample timestamp in ISO 8601 format"
    },
    "value": {
      "type": "number",
      "description": "Measured value"
    },
    "quality": {
      "type": "string",
      "enum": ["GOOD", "BAD", "UNCERTAIN"],
      "description": "Measurement quality"
    },
    "metadata": {
      "type": "object",
      "description": "Optional metadata and quality details",
      "additionalProperties": true
    },
    "zone_id": {
      "type": "integer",
      "description": "Zone ID (optional, server-side resolution)"
    },
    "cycle_id": {
      "type": "integer",
      "description": "Grow cycle ID (optional, server-side resolution)"
    }
  },
  "additionalProperties": false
}
