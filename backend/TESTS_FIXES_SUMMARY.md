# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤ - –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–æ–π –æ—à–∏–±–∫–∏ –≤ Add.vue

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª `lang="ts"` –≤ —Ç–µ–≥–µ `<script setup>` –≤ `Pages/Devices/Add.vue`
- –≠—Ç–æ –≤—ã–∑—ã–≤–∞–ª–æ –æ—à–∏–±–∫—É –ø—Ä–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏: `Unexpected token, expected "from"`

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–ª–µ–Ω `lang="ts"` –≤ —Ç–µ–≥ `<script setup>`
- –¢–µ–ø–µ—Ä—å TypeScript –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏–º–ø–æ—Ä—Ç—ã —Ç–∏–ø–æ–≤

**–§–∞–π–ª:**
- `backend/laravel/resources/js/Pages/Devices/Add.vue` - –¥–æ–±–∞–≤–ª–µ–Ω `lang="ts"`

### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ–∫–æ–≤ –≤ —Ç–µ—Å—Ç–∞—Ö

**–ü—Ä–æ–±–ª–µ–º—ã:**
- –ú–æ–∫–∏ –¥–ª—è `useApi` –∏ `useErrorHandler` –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- –ú–æ–∫–∏ —Å–æ–∑–¥–∞–≤–∞–ª–∏—Å—å –≤ `beforeEach`, —á—Ç–æ –Ω–µ –ø–æ–∑–≤–æ–ª—è–ª–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
- –ú–æ–∫–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –Ω–∞ —É—Ä–æ–≤–Ω–µ –º–æ–¥—É–ª—è

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- –í—ã–Ω–µ—Å–µ–Ω—ã –º–æ–∫–∏ `mockApi` –Ω–∞ —É—Ä–æ–≤–µ–Ω—å –º–æ–¥—É–ª—è –≤ `useNodeLifecycle.spec.ts`
- –í—ã–Ω–µ—Å–µ–Ω—ã –º–æ–∫–∏ `mockApi` –Ω–∞ —É—Ä–æ–≤–µ–Ω—å –º–æ–¥—É–ª—è –≤ `useRateLimitedApi.spec.ts`
- –£–±—Ä–∞–Ω—ã `vi.doMock` –∏–∑ `beforeEach` - –º–æ–∫–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–º–∏

**–§–∞–π–ª—ã:**
- `backend/laravel/resources/js/composables/__tests__/useNodeLifecycle.spec.ts` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –º–æ–∫–∏
- `backend/laravel/resources/js/composables/__tests__/useRateLimitedApi.spec.ts` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –º–æ–∫–∏

### 3. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ fake timers –≤ —Ç–µ—Å—Ç–∞—Ö

**–ü—Ä–æ–±–ª–µ–º—ã:**
- `vi.advanceTimersByTime()` –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ
- –ù—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `vi.advanceTimersByTimeAsync()` –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –¢–µ—Å—Ç—ã —Å fake timers –¥–æ–ª–∂–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø—Ä–æ–¥–≤–∏–≥–∞—Ç—å –≤—Ä–µ–º—è

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- –ó–∞–º–µ–Ω–µ–Ω—ã `vi.advanceTimersByTime()` –Ω–∞ `vi.advanceTimersByTimeAsync()` –≤ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–∞—Ö
- –î–æ–±–∞–≤–ª–µ–Ω `await` –ø–µ—Ä–µ–¥ `vi.advanceTimersByTimeAsync()` –≤ —Ç–µ—Å—Ç–∞—Ö —Å fake timers
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Ç–µ—Å—Ç—ã –¥–ª—è `useOptimisticUpdate` –∏ `useRateLimitedApi`

**–§–∞–π–ª—ã:**
- `backend/laravel/resources/js/composables/__tests__/useOptimisticUpdate.spec.ts` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã fake timers
- `backend/laravel/resources/js/composables/__tests__/useRateLimitedApi.spec.ts` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã fake timers

### 4. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–æ–∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ —Ç–µ—Å—Ç–∞—Ö

**–ü—Ä–æ–±–ª–µ–º—ã:**
- –¢–µ—Å—Ç—ã –ø—Ä–æ–≤–µ—Ä—è–ª–∏ `result.data` –≤–º–µ—Å—Ç–æ `result` –Ω–∞–ø—Ä—è–º—É—é
- `useRateLimitedApi` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤–µ—Å—å –æ—Ç–≤–µ—Ç axios, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ `data`

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- –ò–∑–º–µ–Ω–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å `result.data` –Ω–∞ `result` –≤ —Ç–µ—Å—Ç–∞—Ö –¥–ª—è `useRateLimitedApi`
- –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–ª—è –≤—Å–µ—Ö –º–µ—Ç–æ–¥–æ–≤ API

**–§–∞–π–ª—ã:**
- `backend/laravel/resources/js/composables/__tests__/useRateLimitedApi.spec.ts` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### 5. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤ –¥–ª—è lifecycle —Å–æ—Å—Ç–æ—è–Ω–∏–π

**–ü—Ä–æ–±–ª–µ–º—ã:**
- –¢–µ—Å—Ç –ø—Ä–æ–≤–µ—Ä—è–ª `getStateLabel('UNKNOWN')`, –Ω–æ —Ç–∞–∫–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –Ω–µ—Ç –≤ —Ç–∏–ø–∞—Ö
- –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–ª—è –≤—Å–µ—Ö —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö lifecycle —Å–æ—Å—Ç–æ—è–Ω–∏–π
- –£–±—Ä–∞–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–ª—è –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è `UNKNOWN`

**–§–∞–π–ª—ã:**
- `backend/laravel/resources/js/composables/__tests__/useNodeLifecycle.spec.ts` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω —Ç–µ—Å—Ç –¥–ª—è `getStateLabel`

## üìä –°—Ç–∞—Ç—É—Å —Ç–µ—Å—Ç–æ–≤

### –ü—Ä–æ–π–¥–µ–Ω–æ ‚úÖ
- `composables/__tests__/useStoreEvents.spec.ts` - –≤—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Ç–µ—Å—Ç–æ–≤ –¥–ª—è stores –ø—Ä–æ—Ö–æ–¥—è—Ç
- –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è composables –ø—Ä–æ—Ö–æ–¥—è—Ç

### –¢—Ä–µ–±—É—é—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è ‚ö†Ô∏è
- `composables/__tests__/useNodeLifecycle.spec.ts` - –ø—Ä–æ–±–ª–µ–º—ã —Å –º–æ–∫–∞–º–∏
- `composables/__tests__/useRateLimitedApi.spec.ts` - –ø—Ä–æ–±–ª–µ–º—ã —Å –º–æ–∫–∞–º–∏ –∏ fake timers
- `composables/__tests__/useOptimisticUpdate.spec.ts` - –ø—Ä–æ–±–ª–µ–º—ã —Å fake timers
- `Pages/Devices/__tests__/Index.virtualization.spec.ts` - RecycleScroller –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω

## üîß –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. –ú–æ–∫–∏ API
–ü—Ä–æ–±–ª–µ–º–∞: –ú–æ–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏, –Ω–æ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ –º–æ–¥—É–ª—è.
–†–µ—à–µ–Ω–∏–µ: –í—ã–Ω–µ—Å—Ç–∏ –º–æ–∫–∏ –Ω–∞ —É—Ä–æ–≤–µ–Ω—å –º–æ–¥—É–ª—è –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Ö –Ω–∞–ø—Ä—è–º—É—é.

### 2. Fake Timers
–ü—Ä–æ–±–ª–µ–º–∞: `vi.advanceTimersByTime()` –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π.
–†–µ—à–µ–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `vi.advanceTimersByTimeAsync()` —Å `await`.

### 3. –í–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
–ü—Ä–æ–±–ª–µ–º–∞: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ API –∑–∞–ø—Ä–æ—Å–æ–≤.
–†–µ—à–µ–Ω–∏–µ: –ü—Ä–æ–≤–µ—Ä—è—Ç—å –≤–µ—Å—å –æ–±—ä–µ–∫—Ç –æ—Ç–≤–µ—Ç–∞, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ `data`.

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –º–æ–∫–∏** - —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ –º–æ–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ
2. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å fake timers** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è –ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏
3. **–î–æ–±–∞–≤–∏—Ç—å –º–æ–∫–∏ –¥–ª—è RecycleScroller** - –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤ —Ç–µ—Å—Ç–∞—Ö
4. **–ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã —Å–Ω–æ–≤–∞** - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –û—Å–Ω–æ–≤–Ω—ã–µ –æ—à–∏–±–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —É—Å–ø–µ—à–Ω–æ –ø–µ—Ä–µ—Å–æ–±—Ä–∞–Ω, –æ—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –≤ —Ç–µ—Å—Ç–∞—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã

