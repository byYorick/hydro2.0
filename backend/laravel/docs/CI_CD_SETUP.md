# CI/CD Pipeline Setup

**–î–∞—Ç–∞:** 2025-11-27  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ

---

## üìã –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

CI/CD pipeline –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ `.github/workflows/ci.yml` –∏ –≤–∫–ª—é—á–∞–µ—Ç:

### –í—ã–ø–æ–ª–Ω—è–µ–º—ã–µ –∑–∞–¥–∞—á–∏

1. **PHP Tests (PHPUnit/Pest)**
   - Unit —Ç–µ—Å—Ç—ã (95 —Ç–µ—Å—Ç–æ–≤)
   - Feature —Ç–µ—Å—Ç—ã (180 —Ç–µ—Å—Ç–æ–≤)
   - –í—Å–µ–≥–æ: 275 –ø—Ä–æ—Ö–æ–¥—è—â–∏—Ö —Ç–µ—Å—Ç–æ–≤
   - 5 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ–ø—É—â–µ–Ω–æ (—Ç—Ä–µ–±—É—é—Ç —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π)

2. **Frontend Tests (Vitest)**
   - Unit —Ç–µ—Å—Ç—ã Vue –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
   - Composables —Ç–µ—Å—Ç—ã

3. **E2E Tests (Playwright)**
   - Browser —Ç–µ—Å—Ç—ã
   - Smoke —Ç–µ—Å—Ç—ã

4. **Build**
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–±–æ—Ä–∫–∏ frontend

---

## üîß –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –¢–µ—Å—Ç–æ–≤–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
- `APP_ENV=testing`
- `DB_CONNECTION=pgsql`
- `BROADCAST_CONNECTION=log`
- `CACHE_STORE=array`
- `SESSION_DRIVER=array`
- `QUEUE_CONNECTION=sync`

---

## ‚úÖ –ü—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

–°–ª–µ–¥—É—é—â–∏–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç—Å—è –ø–æ –ª–æ–≥–∏—á–µ—Å–∫–∏–º –ø—Ä–∏—á–∏–Ω–∞–º:

1. **TimescaleDBRetentionTest** - —Ç—Ä–µ–±—É–µ—Ç TimescaleDB extension (–Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –≤ CI –±–µ–∑ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)
2. **TelemetryCleanupCommandTest** - –º–æ–∂–µ—Ç –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å—Å—è –ø—Ä–∏ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö –ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
3. **DatabaseIndexesTest** - –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å EXPLAIN
4. **N1OptimizationTest** - –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è, –µ—Å–ª–∏ –º–∞—Ä—à—Ä—É—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω
5. **E2E/pid-config.spec.ts** - –ø—Ä–æ–ø—É—â–µ–Ω —á–µ—Ä–µ–∑ `describe.skip` (—Ç—Ä–µ–±—É–µ—Ç UI —Ñ–∏–∫—Å—Ç—É—Ä)

–≠—Ç–∏ —Ç–µ—Å—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤ –ª–æ–∫–∞–ª—å–Ω–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏ —Å –ø–æ–ª–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π.

---

## üìä –°—Ç–∞—Ç—É—Å —Ç–µ—Å—Ç–æ–≤

**–í—Å–µ –ø—Ä–æ—Ö–æ–¥—è—â–∏–µ —Ç–µ—Å—Ç—ã:** 275 ‚úÖ  
**–ü—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã:** 5 ‚è≠Ô∏è  
**–û–±—â–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ:** ~98%

---

## üöÄ –ó–∞–ø—É—Å–∫ –≤ CI/CD

Pipeline –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏:
- Push –≤ –ª—é–±—É—é –≤–µ—Ç–∫—É
- Pull Request

### –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã

CI/CD –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã:
- `phpunit-junit` - —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã PHPUnit —Ç–µ—Å—Ç–æ–≤
- `vitest-junit` - —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã Vitest —Ç–µ—Å—Ç–æ–≤
- `vitest-coverage` - –ø–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞ Vitest
- `playwright-report` - –æ—Ç—á—ë—Ç—ã E2E —Ç–µ—Å—Ç–æ–≤

---

## üîÑ –£–ª—É—á—à–µ–Ω–∏—è

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:

1. **–î–æ–±–∞–≤–∏—Ç—å TimescaleDB –≤ CI/CD**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±—Ä–∞–∑ PostgreSQL —Å TimescaleDB
   - –í–∫–ª—é—á–∏—Ç—å –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ TimescaleDB —Ç–µ—Å—Ç—ã

2. **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤**
   - –†–∞–∑–¥–µ–ª–∏—Ç—å Unit –∏ Feature —Ç–µ—Å—Ç—ã –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ jobs
   - –£—Å–∫–æ—Ä–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ pipeline

3. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**
   - –£–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –¥–ª—è Composer –∏ npm
   - –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è Playwright –±—Ä–∞—É–∑–µ—Ä–æ–≤

4. **Matrix —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –≤–µ—Ä—Å–∏—è—Ö PHP
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –≤–µ—Ä—Å–∏—è—Ö Node.js

---

**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 2025-11-27  
**–í–µ—Ä—Å–∏—è:** 1.0

