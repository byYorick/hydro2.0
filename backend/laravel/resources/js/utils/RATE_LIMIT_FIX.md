# Исправление проблемы Rate Limiting

## Проблема

После рефакторинга `echoClient.ts` возникла проблема с rate limiting:
- Множественные API запросы получают ошибку "Too Many Attempts" (429/500)
- `/broadcasting/auth` также попадает под ограничение
- При открытии страницы множество компонентов одновременно делают запросы

## Причина

1. **Глобальный лимит API**: 60 запросов в минуту был слишком низким
2. **Лимит `/broadcasting/auth`**: 60 запросов в минуту недостаточно для множественных каналов
3. **Одновременные запросы**: Множество компонентов делают запросы при загрузке страницы

## Решение

### 1. Увеличен лимит для `/broadcasting/auth`

**Файл**: `backend/laravel/routes/web.php`

**Изменение**:
- Было: `throttle:60,1` (60 запросов в минуту)
- Стало: `throttle:300,1` (300 запросов в минуту)

**Обоснование**:
- WebSocket может создавать множество каналов
- При переподключении все каналы требуют авторизации
- 300 запросов в минуту достаточно для нормальной работы

### 2. Увеличен глобальный лимит для API

**Файл**: `backend/laravel/bootstrap/app.php`

**Изменение**:
- Было: `ThrottleRequests::class.':60,1'` (60 запросов в минуту)
- Стало: `ThrottleRequests::class.':120,1'` (120 запросов в минуту)

**Обоснование**:
- Множественные компоненты на странице делают запросы
- Health checks, telemetry, alerts и другие данные загружаются одновременно
- 120 запросов в минуту достаточно для нормальной работы

### 3. Увеличен лимит для авторизованных API роутов

**Файл**: `backend/laravel/routes/api.php`

**Изменение**:
- Было: `throttle:60,1` (60 запросов в минуту)
- Стало: `throttle:120,1` (120 запросов в минуту)

**Обоснование**:
- Согласованность с глобальным лимитом
- Поддержка множественных компонентов на странице

## Ожидаемое поведение

После изменений:
- ✅ `/broadcasting/auth` имеет лимит 300 запросов в минуту
- ✅ Общие API роуты имеют лимит 120 запросов в минуту
- ✅ Достаточно для нормальной работы множественных компонентов

## Мониторинг

Если проблемы сохраняются:
1. Проверить логи на количество запросов
2. Возможно, нужно еще больше увеличить лимиты
3. Или оптимизировать фронтенд для уменьшения количества запросов

---

*Исправление выполнено: $(date)*

