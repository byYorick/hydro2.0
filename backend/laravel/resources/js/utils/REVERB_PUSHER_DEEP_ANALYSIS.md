# –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ Laravel Reverb –∏ pusher-js –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

## –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ
1. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Laravel Reverb](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-laravel-reverb)
2. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ pusher-js](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-pusher-js)
3. [–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Reverb –∏ pusher-js](#–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è)
4. [–ü—Ä–æ–±–ª–µ–º–∞ wsPath - –∫–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞](#–ø—Ä–æ–±–ª–µ–º–∞-wspath)
5. [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ –ø—Ä–æ–µ–∫—Ç–µ](#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è-–≤-–ø—Ä–æ–µ–∫—Ç–µ)
6. [–ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ](#–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ-—Ä–µ—à–µ–Ω–∏–µ)
7. [–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥—É](#—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏)

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Laravel Reverb

### –ß—Ç–æ —Ç–∞–∫–æ–µ Laravel Reverb?

[Laravel Reverb](https://laravel.com/docs/12.x/reverb) ‚Äî —ç—Ç–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π WebSocket —Å–µ—Ä–≤–µ—Ä –¥–ª—è Laravel 12.x, –∫–æ—Ç–æ—Ä—ã–π –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:

- **–ü—Ä—è–º—É—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é** —Å Laravel –±–µ–∑ —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Pusher Protocol** –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –∫–ª–∏–µ–Ω—Ç–∞–º–∏
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** —á–µ—Ä–µ–∑ Redis pub/sub
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** —á–µ—Ä–µ–∑ Laravel –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é

### –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ Reverb

#### 1. –¢–æ—á–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (Endpoints)

–°–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Laravel:

> Reverb listens for WebSocket connections at `/app` and handles API requests at `/apps`.

**–í–∞–∂–Ω–æ**: Reverb —Å–ª—É—à–∞–µ—Ç WebSocket –Ω–∞ –ø—É—Ç–∏ `/app`, –∞ –Ω–µ –Ω–∞ –∫–æ—Ä–Ω–µ–≤–æ–º –ø—É—Ç–∏!

#### 2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ URL –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

```
ws://host:port/app/{app_key}?protocol=7&client=js&version=X.X.X
```

–ì–¥–µ:
- `/app` - –±–∞–∑–æ–≤—ã–π –ø—É—Ç—å –¥–ª—è WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- `{app_key}` - –∫–ª—é—á –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (REVERB_APP_KEY)
- –û—Å—Ç–∞–ª—å–Ω–æ–µ - –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ Pusher

#### 3. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–∞

–ò–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏ –∫–æ–¥–∞ –ø—Ä–æ–µ–∫—Ç–∞:

```php
// config/reverb.php
'servers' => [
    'reverb' => [
        'host' => env('REVERB_SERVER_HOST', '0.0.0.0'),
        'port' => env('REVERB_SERVER_PORT', 6001),
        'path' => env('REVERB_SERVER_PATH', ''), // –ü—É—Ç—å —Å–µ—Ä–≤–µ—Ä–∞ (–¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)
        'hostname' => env('REVERB_CLIENT_HOST', 'localhost'), // –î–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤
    ],
],
```

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –º–æ–º–µ–Ω—Ç**: 
- `path` –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å–µ—Ä–≤–µ—Ä–∞ ‚Äî —ç—Ç–æ **–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –ø—É—Ç—å** –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ReactPHP —Å–µ—Ä–≤–µ—Ä–∞
- **–ù–ï –º–µ–Ω—è–µ—Ç** –∫–æ–Ω–µ—á–Ω—ã–π –ø—É—Ç—å `/app` –¥–ª—è WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

#### 4. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è (Apps)

```php
'apps' => [
    [
        'key' => env('REVERB_APP_KEY'),
        'secret' => env('REVERB_APP_SECRET'),
        'app_id' => env('REVERB_APP_ID'),
        'options' => [
            'host' => env('REVERB_CLIENT_HOST', 'localhost'),
            'port' => env('REVERB_PORT', 6001),
            'scheme' => env('REVERB_SCHEME', 'http'),
            'path' => env('REVERB_CLIENT_PATH', ''), // –ü—É—Ç—å –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞
        ],
    ],
],
```

**–í–∞–∂–Ω–æ**: 
- `path` –≤ `apps[].options` ‚Äî —ç—Ç–æ –ø—É—Ç—å, –∫–æ—Ç–æ—Ä—ã–π **—Å–æ–æ–±—â–∞–µ—Ç—Å—è –∫–ª–∏–µ–Ω—Ç—É**
- –ï—Å–ª–∏ –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞, –∫–ª–∏–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—É—Ç—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (`/app`)

### –ö–∞–∫ Reverb –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

1. **–ö–ª–∏–µ–Ω—Ç –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è** –∫ `ws://host:port/app/{app_key}`
2. **Reverb –ø—Ä–æ–≤–µ—Ä—è–µ—Ç** –Ω–∞–ª–∏—á–∏–µ `{app_key}` –≤ —Å–ø–∏—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
3. **Reverb –ø—Ä–æ–≤–µ—Ä—è–µ—Ç** –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –¥–ª—è private/presence –∫–∞–Ω–∞–ª–æ–≤
4. **–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è** –Ω–∞ –ø—É—Ç–∏ `/app/{app_key}`

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ pusher-js

### –ß—Ç–æ —Ç–∞–∫–æ–µ pusher-js?

`pusher-js` ‚Äî —ç—Ç–æ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è JavaScript –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä–∞–º, —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–º —Å Pusher Protocol (–≤–∫–ª—é—á–∞—è Laravel Reverb).

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è pusher-js

#### –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

```typescript
new Pusher(appKey, {
  cluster: 'cluster-name',      // –î–ª—è Pusher.com (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å Reverb)
  wsHost: 'localhost',          // –•–æ—Å—Ç WebSocket —Å–µ—Ä–≤–µ—Ä–∞
  wsPort: 6001,                 // –ü–æ—Ä—Ç WebSocket —Å–µ—Ä–≤–µ—Ä–∞
  wssPort: 6001,                // –ü–æ—Ä—Ç –¥–ª—è WSS
  wsPath: '/app',               // –ü—É—Ç—å –∫ WebSocket —ç–Ω–¥–ø–æ–∏–Ω—Ç—É ‚ö†Ô∏è
  forceTLS: false,              // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ TLS
  enabledTransports: ['ws'],    // –†–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç—ã
  disableStats: true,           // –û—Ç–∫–ª—é—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
})
```

### –ö–∞–∫ pusher-js —Å—Ç—Ä–æ–∏—Ç URL

#### –ê–ª–≥–æ—Ä–∏—Ç–º –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è URL:

1. **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞**:
   - –ï—Å–ª–∏ `forceTLS === true` –∏–ª–∏ `scheme === 'https'` ‚Üí `wss://`
   - –ò–Ω–∞—á–µ ‚Üí `ws://`

2. **–ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –±–∞–∑–æ–≤–æ–≥–æ URL**:
   ```
   {scheme}://{wsHost}:{wsPort}{wsPath}/{app_key}
   ```

3. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞**:
   ```
   ?protocol=7&client=js&version=X.X.X
   ```

#### üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê: wsPath –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

–ï—Å–ª–∏ `wsPath` **–Ω–µ —É–∫–∞–∑–∞–Ω** –∏–ª–∏ **—É–∫–∞–∑–∞–Ω –∫–∞–∫ `/app`**, pusher-js —Å—Ç—Ä–æ–∏—Ç URL:

```
ws://localhost:6001/app/{app_key}
```

–ù–æ –µ—Å–ª–∏ `wsPath` **—è–≤–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ `/app`** –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, –∏ pusher-js **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç `/app`**, —Ç–æ –ø–æ–ª—É—á–∞–µ—Ç—Å—è:

```
ws://localhost:6001/app/app/{app_key}  ‚ùå –î–í–û–ô–ù–û–ô /app
```

### –ü–æ–≤–µ–¥–µ–Ω–∏–µ wsPath –≤ pusher-js

–°–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏ –∏—Å—Ö–æ–¥–Ω–æ–º—É –∫–æ–¥—É pusher-js:

- **–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é**: `wsPath = '/app'`
- **–ï—Å–ª–∏ —É–∫–∞–∑–∞–Ω —è–≤–Ω–æ**: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —É–∫–∞–∑–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
- **–ï—Å–ª–∏ –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ `""`**: –ø—É—Ç—å –Ω–µ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ—Ä–Ω–µ–≤–æ–π –ø—É—Ç—å)

**–ü—Ä–æ–±–ª–µ–º–∞**: 
- Reverb –æ–∂–∏–¥–∞–µ—Ç –ø—É—Ç—å `/app/{app_key}`
- pusher-js –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–æ–±–∞–≤–ª—è–µ—Ç `/app`
- –ï—Å–ª–∏ `wsPath` —è–≤–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ `/app`, –º–æ–∂–µ—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç

---

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Reverb –∏ pusher-js

### –û–∂–∏–¥–∞–µ–º–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Browser   ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ    Nginx     ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ   Reverb    ‚îÇ
‚îÇ (pusher-js) ‚îÇ  WebSocket  ‚îÇ  Proxy    ‚îÇ  WebSocket  ‚îÇ   Server   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
     ‚îÇ                        ‚îÇ                         ‚îÇ
     ‚îÇ ws://host:8080/app/   ‚îÇ                         ‚îÇ
     ‚îÇ      {app_key}         ‚îÇ                         ‚îÇ
     ‚îÇ                        ‚îÇ ws://localhost:6001/   ‚îÇ
     ‚îÇ                        ‚îÇ      app/{app_key}      ‚îÇ
     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ –ø—Ä–æ–µ–∫—Ç–µ

#### 1. Reverb —Å–µ—Ä–≤–µ—Ä

```bash
REVERB_SERVER_HOST=0.0.0.0      # –°–ª—É—à–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞—Ö
REVERB_SERVER_PORT=6001         # –ü–æ—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞
REVERB_SERVER_PATH=             # –ü—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ (–∫–æ—Ä–Ω–µ–≤–æ–π –ø—É—Ç—å –¥–ª—è ReactPHP)
REVERB_CLIENT_HOST=localhost    # –î–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤
REVERB_PORT=6001
REVERB_CLIENT_PATH=             # –ü—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞
```

#### 2. Nginx –ø—Ä–æ–∫—Å–∏

–ò–∑ `nginx-vite-proxy.conf`:

```nginx
location ~ ^/app/[^/]+(/.*)?$ {
    proxy_pass http://127.0.0.1:6001;
    # –ü—Ä–æ–∫—Å–∏—Ä—É–µ—Ç /app/{app_key} –Ω–∞ Reverb
}
```

**–í–∞–∂–Ω–æ**: Nginx **—Å–æ—Ö—Ä–∞–Ω—è–µ—Ç** –ø—É—Ç—å `/app/{app_key}` –ø—Ä–∏ –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–∏!

#### 3. –ö–ª–∏–µ–Ω—Ç (echoClient.ts)

–ò–∑ –∞–Ω–∞–ª–∏–∑–∞ –∫–æ–¥–∞:

```typescript
const echoConfig = {
  broadcaster: 'reverb',
  key: 'local',
  wsHost: 'localhost',
  wsPort: 8080,  // Nginx –ø—Ä–æ–∫—Å–∏, –Ω–µ Reverb –Ω–∞–ø—Ä—è–º—É—é
  wsPath: "",    // –ü—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ (–ø—Ä–æ–±–ª–µ–º–∞!)
}
```

### –ü—Ä–æ–±–ª–µ–º–∞: —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ

#### –°—Ü–µ–Ω–∞—Ä–∏–π 1: wsPath = "" (–ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞)

1. **pusher-js —Å—Ç—Ä–æ–∏—Ç URL**:
   ```
   ws://localhost:8080/{app_key}
   ```
   ‚ùå **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ!** –ù–µ—Ç `/app` –ø—É—Ç–∏

2. **Nginx –ø–æ–ª—É—á–∞–µ—Ç –∑–∞–ø—Ä–æ—Å** –∫ `/{app_key}`
3. **Nginx –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç** –ø–æ–¥—Ö–æ–¥—è—â–µ–≥–æ `location`
4. **–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –æ—Ç–∫–ª–æ–Ω—è–µ—Ç—Å—è** ‚ùå

#### –°—Ü–µ–Ω–∞—Ä–∏–π 2: wsPath = "/app" (—è–≤–Ω–æ —É–∫–∞–∑–∞–Ω)

1. **pusher-js —Å—Ç—Ä–æ–∏—Ç URL**:
   ```
   ws://localhost:8080/app/{app_key}
   ```
   ‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–æ!**

2. **Nginx –ø–æ–ª—É—á–∞–µ—Ç –∑–∞–ø—Ä–æ—Å** –∫ `/app/{app_key}`
3. **Nginx –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç** –Ω–∞ `http://127.0.0.1:6001/app/{app_key}`
4. **Reverb –ø–æ–ª—É—á–∞–µ—Ç** –∑–∞–ø—Ä–æ—Å –Ω–∞ `/app/{app_key}`
5. **–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è** ‚úÖ

#### –°—Ü–µ–Ω–∞—Ä–∏–π 3: wsPath –Ω–µ —É–∫–∞–∑–∞–Ω (undefined)

1. **pusher-js –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é** `/app`
2. **pusher-js —Å—Ç—Ä–æ–∏—Ç URL**:
   ```
   ws://localhost:8080/app/{app_key}
   ```
   ‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–æ!**

---

## –ü—Ä–æ–±–ª–µ–º–∞ wsPath - –∫–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞

### üî¥ –ü–†–û–ë–õ–ï–ú–ê: –ò–∑–±—ã—Ç–æ—á–Ω—ã–π –∫–æ–¥ –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è wsPath

–ò–∑ –∞–Ω–∞–ª–∏–∑–∞ `echoClient.ts`:

- **~400 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞** (25% —Ñ–∞–π–ª–∞) –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å `wsPath`
- **–ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É**
- **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ 5+ –º–µ—Å—Ç–∞—Ö**
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Object.defineProperty** –¥–ª—è –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è

### –ü–æ—á–µ–º—É —ç—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞?

#### 1. –ü—É—Ç–∞–Ω–∏—Ü–∞ —Å –ø—É—Ç—è–º–∏

–°—É—â–µ—Å—Ç–≤—É—é—Ç **—Ç—Ä–∏ —Ä–∞–∑–Ω—ã—Ö** –ø–æ–Ω—è—Ç–∏—è –ø—É—Ç–∏:

1. **Reverb Server Path** (`REVERB_SERVER_PATH`)
   - –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –ø—É—Ç—å –¥–ª—è ReactPHP —Å–µ—Ä–≤–µ—Ä–∞
   - –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: `''` (–∫–æ—Ä–Ω–µ–≤–æ–π)

2. **Reverb Client Path** (`REVERB_CLIENT_PATH`)
   - –ü—É—Ç—å, —Å–æ–æ–±—â–∞–µ–º—ã–π –∫–ª–∏–µ–Ω—Ç–∞–º
   - –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: `''` (–æ–∑–Ω–∞—á–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `/app`)

3. **pusher-js wsPath**
   - –ü—É—Ç—å, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è URL
   - –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: `/app`

#### 2. –ö–æ–Ω—Ñ–ª–∏–∫—Ç –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

- Reverb –æ–∂–∏–¥–∞–µ—Ç: `/app/{app_key}`
- pusher-js –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `/app` ‚Üí —Å—Ç—Ä–æ–∏—Ç `/app/{app_key}` ‚úÖ
- –ù–æ –µ—Å–ª–∏ `wsPath = ""`, pusher-js —Å—Ç—Ä–æ–∏—Ç: `/{app_key}` ‚ùå

#### 3. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ò–∑ —Ç–µ–∫—É—â–µ–≥–æ –∫–æ–¥–∞:

```typescript
// echoClient.ts:328-343
if (path !== undefined && path !== null && typeof path === 'string' && path.trim().length > 0) {
  echoConfig.wsPath = path
} else {
  echoConfig.wsPath = ""  // ‚ùå –ü–†–û–ë–õ–ï–ú–ê: –ü—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞
}
```

**–ü—Ä–æ–±–ª–µ–º–∞**: 
- –ï—Å–ª–∏ `REVERB_CLIENT_PATH = ''` (–ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞)
- –ö–æ–¥ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `wsPath = ""`
- pusher-js —Å—Ç—Ä–æ–∏—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL

### –†–µ–∞–ª—å–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞ –ø—Ä–æ–±–ª–µ–º—ã

–°–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Laravel Reverb:

> Reverb listens for WebSocket connections at `/app`

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ:
- Reverb **–≤—Å–µ–≥–¥–∞** —Å–ª—É—à–∞–µ—Ç –Ω–∞ `/app/{app_key}`
- –ù–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç `REVERB_SERVER_PATH` –∏–ª–∏ `REVERB_CLIENT_PATH`
- –≠—Ç–æ **—Ö–∞—Ä–¥–∫–æ–¥** –≤ Reverb —Å–µ—Ä–≤–µ—Ä–µ

–ü–æ—ç—Ç–æ–º—É:
- `wsPath` **–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å** `/app` –∏–ª–∏ **–Ω–µ —É–∫–∞–∑–∞–Ω** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `/app`)
- **–ù–ï –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å** –ø—É—Å—Ç–æ–π —Å—Ç—Ä–æ–∫–æ–π `""`

---

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ –ø—Ä–æ–µ–∫—Ç–µ

### –¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

#### Backend (config/reverb.php)

```php
'servers' => [
    'reverb' => [
        'path' => env('REVERB_SERVER_PATH', ''),  // –ü—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞
    ],
],
'apps' => [
    [
        'options' => [
            'path' => env('REVERB_CLIENT_PATH', env('REVERB_SERVER_PATH', '')),  // –ü—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞
        ],
    ],
],
```

#### Environment (.env)

```bash
REVERB_SERVER_PATH=           # –ü—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞
REVERB_CLIENT_PATH=           # –ù–µ —É–∫–∞–∑–∞–Ω–æ (–ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞)
```

#### Frontend (echoClient.ts)

```typescript
const path = resolvePath()  // –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç undefined –∏–ª–∏ –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É

if (path && path.length > 0) {
  echoConfig.wsPath = path
} else {
  echoConfig.wsPath = ""  // ‚ùå –ü–†–û–ë–õ–ï–ú–ê
}
```

#### Nginx

```nginx
location ~ ^/app/[^/]+(/.*)?$ {
    proxy_pass http://127.0.0.1:6001;
}
```

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏

1. **echoClient.ts** —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `wsPath = ""`
2. **pusher-js** –ø–æ–ª—É—á–∞–µ—Ç `wsPath = ""`
3. **pusher-js** —Å—Ç—Ä–æ–∏—Ç URL: `ws://localhost:8080/{app_key}` ‚ùå
4. **Nginx** –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç –ø–æ–¥—Ö–æ–¥—è—â–∏–π location
5. **–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –æ—Ç–∫–ª–æ–Ω—è–µ—Ç—Å—è**

–ò–õ–ò (–ø–æ—Å–ª–µ –≤—Å–µ—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –≤ –∫–æ–¥–µ):

1. **echoClient.ts** —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `wsPath = ""`
2. **–ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞** –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ `""` (–Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç)
3. **Object.defineProperty** –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç (–Ω–æ –≤—Å–µ —Ä–∞–≤–Ω–æ `""`)
4. **pusher-js** –≤—Å–µ —Ä–∞–≤–Ω–æ —Å—Ç—Ä–æ–∏—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL

---

## –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ

### –†–µ—à–µ–Ω–∏–µ 1: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å wsPath = "/app" —è–≤–Ω–æ

#### –ò–∑–º–µ–Ω–∏—Ç—å echoClient.ts:

```typescript
function resolvePath(): string | undefined {
  const envPath = 
    (import.meta as any).env?.VITE_REVERB_SERVER_PATH ??
    (import.meta as any).env?.VITE_REVERB_PATH ??
    ''

  if (typeof envPath === 'string' && envPath.trim().length > 0) {
    return envPath.startsWith('/') ? envPath : `/${envPath}`
  }

  // ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å '/app' –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è Reverb
  return '/app'
}
```

–ò–ª–∏ –≤ buildEchoConfig:

```typescript
const path = resolvePath()

const echoConfig = {
  // ...
  wsPath: path || '/app',  // ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º '/app' –µ—Å–ª–∏ path –Ω–µ —É–∫–∞–∑–∞–Ω
}
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- ‚úÖ –ü—Ä–æ—Å—Ç–æ–µ —Ä–µ—à–µ–Ω–∏–µ
- ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Reverb
- ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è backend –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏**:
- ‚ö†Ô∏è –ñ–µ—Å—Ç–∫–æ –∑–∞–¥–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
- ‚ö†Ô∏è –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –µ—Å–ª–∏ Reverb –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –¥—Ä—É–≥–æ–π –ø—É—Ç—å

### –†–µ—à–µ–Ω–∏–µ 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é pusher-js

#### –ò–∑–º–µ–Ω–∏—Ç—å echoClient.ts:

```typescript
const echoConfig = {
  broadcaster: 'reverb',
  key: 'local',
  wsHost: 'localhost',
  wsPort: 8080,
  // ‚úÖ –ù–ï —É–∫–∞–∑—ã–≤–∞–µ–º wsPath - pusher-js –∏—Å–ø–æ–ª—å–∑—É–µ—Ç '/app' –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
}

// –ï—Å–ª–∏ path —è–≤–Ω–æ —É–∫–∞–∑–∞–Ω —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è, –∏—Å–ø–æ–ª—å–∑—É–µ–º –µ–≥–æ
if (path && path.length > 0) {
  echoConfig.wsPath = path
}
// –ò–Ω–∞—á–µ - –Ω–µ —É–∫–∞–∑—ã–≤–∞–µ–º, pusher-js –∏—Å–ø–æ–ª—å–∑—É–µ—Ç '/app'
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é pusher-js
- ‚úÖ –ì–∏–±–∫–æ–µ - –º–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Reverb

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏**:
- ‚ö†Ô∏è –ú–µ–Ω–µ–µ —è–≤–Ω–æ–µ

### –†–µ—à–µ–Ω–∏–µ 3: –ò—Å–ø—Ä–∞–≤–∏—Ç—å backend –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

#### –ò–∑–º–µ–Ω–∏—Ç—å config/reverb.php:

```php
'apps' => [
    [
        'options' => [
            'path' => env('REVERB_CLIENT_PATH', '/app'),  // ‚úÖ –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é '/app'
        ],
    ],
],
```

#### –ü–µ—Ä–µ–¥–∞—Ç—å –≤–æ frontend:

```php
// –í blade —à–∞–±–ª–æ–Ω–µ –∏–ª–∏ —á–µ—Ä–µ–∑ Inertia
<script>
    window.REVERB_WS_PATH = '{{ config('reverb.apps.0.options.path', '/app') }}';
</script>
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- ‚úÖ –ï–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã (backend)
- ‚úÖ –ì–∏–±–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç Laravel best practices

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏**:
- ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è backend –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ —Ä–µ—à–µ–Ω–∏–µ

**–ö–æ–º–±–∏–Ω–∞—Ü–∏—è –†–µ—à–µ–Ω–∏—è 1 –∏ 2**:

```typescript
function resolvePath(): string | undefined {
  const envPath = 
    (import.meta as any).env?.VITE_REVERB_SERVER_PATH ??
    (import.meta as any).env?.VITE_REVERB_PATH ??
    ''

  if (typeof envPath === 'string' && envPath.trim().length > 0) {
    return envPath.startsWith('/') ? envPath : `/${envPath}`
  }

  // ‚úÖ –î–ª—è Reverb –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ–º '/app'
  // –ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º undefined - pusher-js –∏—Å–ø–æ–ª—å–∑—É–µ—Ç '/app'
  return undefined
}

function buildEchoConfig(): Record<string, unknown> {
  const path = resolvePath()
  
  const echoConfig: Record<string, unknown> = {
    broadcaster: 'reverb',
    key: 'local',
    wsHost: 'localhost',
    wsPort: 8080,
    // –ù–ï —É–∫–∞–∑—ã–≤–∞–µ–º wsPath, –µ—Å–ª–∏ path –Ω–µ –∑–∞–¥–∞–Ω - pusher-js –∏—Å–ø–æ–ª—å–∑—É–µ—Ç '/app'
  }

  // ‚úÖ –£–∫–∞–∑—ã–≤–∞–µ–º wsPath —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —è–≤–Ω–æ –∑–∞–¥–∞–Ω —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è
  if (path) {
    echoConfig.wsPath = path
  }
  // –ò–Ω–∞—á–µ - –Ω–µ —É–∫–∞–∑—ã–≤–∞–µ–º, pusher-js –∏—Å–ø–æ–ª—å–∑—É–µ—Ç '/app' –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

  return echoConfig
}
```

---

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥—É

### –®–∞–≥ 1: –£–ø—Ä–æ—Å—Ç–∏—Ç—å resolvePath

```typescript
function resolvePath(): string | undefined {
  const envPath = 
    (import.meta as any).env?.VITE_REVERB_SERVER_PATH ??
    (import.meta as any).env?.VITE_REVERB_PATH

  if (typeof envPath === 'string' && envPath.trim().length > 0) {
    const trimmed = envPath.trim()
    return trimmed.startsWith('/') ? trimmed : `/${trimmed}`
  }

  // –î–ª—è Reverb –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–µ —É–∫–∞–∑—ã–≤–∞–µ–º –ø—É—Ç—å
  // pusher-js –∏—Å–ø–æ–ª—å–∑—É–µ—Ç '/app' –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
  return undefined
}
```

### –®–∞–≥ 2: –£–ø—Ä–æ—Å—Ç–∏—Ç—å buildEchoConfig

```typescript
function buildEchoConfig(): Record<string, unknown> {
  const path = resolvePath()
  
  const echoConfig: Record<string, unknown> = {
    broadcaster: 'reverb',
    key: 'local',
    wsHost: resolveHost(),
    wsPort: resolvePort(resolveScheme()),
    forceTLS: shouldUseTls(),
    enabledTransports: getEnabledTransports(),
    disableStats: true,
    withCredentials: true,
    authEndpoint: '/broadcasting/auth',
    auth: {
      headers: {
        'X-Requested-With': 'XMLHttpRequest',
        ...(csrfToken ? { 'X-CSRF-TOKEN': csrfToken } : {}),
      },
      withCredentials: true,
    },
    encrypted: shouldUseTls(),
  }

  // ‚úÖ –£–∫–∞–∑—ã–≤–∞–µ–º wsPath —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —è–≤–Ω–æ –∑–∞–¥–∞–Ω
  if (path) {
    echoConfig.wsPath = path
  }

  return echoConfig
}
```

### –®–∞–≥ 3: –£–î–ê–õ–ò–¢–¨ –≤–µ—Å—å –∫–æ–¥ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è wsPath

–£–¥–∞–ª–∏—Ç—å:
- ‚ùå –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫—É—é –ø—Ä–æ–≤–µ—Ä–∫—É `wsPath` (—Å—Ç—Ä–æ–∫–∏ 1164-1224)
- ‚ùå –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è Echo (—Å—Ç—Ä–æ–∫–∏ 958-990)
- ‚ùå –§—É–Ω–∫—Ü–∏—é `overrideWsPathWithGetter` (—Å—Ç—Ä–æ–∫–∏ 995-1099)
- ‚ùå –í—Å–µ –≤—ã–∑–æ–≤—ã `overrideWsPathWithGetter`
- ‚ùå –§–∏–Ω–∞–ª—å–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É `wsPath` (—Å—Ç—Ä–æ–∫–∏ 1237-1279)

**–≠–∫–æ–Ω–æ–º–∏—è**: ~400 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞!

### –®–∞–≥ 4: –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```typescript
function validateEchoConfig(config: Record<string, unknown>): void {
  const wsPath = config.wsPath as string | undefined
  
  // –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ, –µ—Å–ª–∏ wsPath = ""
  if (wsPath === '') {
    logger.warn('[echoClient] wsPath is empty string, pusher-js will build incorrect URL', {
      suggestion: 'Remove wsPath or set to "/app" for Reverb',
    })
  }
  
  // –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ, –µ—Å–ª–∏ wsPath = "/app/app"
  if (wsPath === '/app/app' || wsPath?.startsWith('/app/app/')) {
    logger.error('[echoClient] wsPath contains double /app path', {
      wsPath,
      suggestion: 'Set wsPath to "/app" or remove it (defaults to "/app")',
    })
  }
}
```

### –®–∞–≥ 5: –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

–î–æ–±–∞–≤–∏—Ç—å –≤ README –∏–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é:

```markdown
## WebSocket –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### Reverb –ø—É—Ç—å

Laravel Reverb —Å–ª—É—à–∞–µ—Ç WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –Ω–∞ –ø—É—Ç–∏ `/app/{app_key}`.

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é `wsPath` –Ω–µ —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Echo, –∏ pusher-js –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `/app` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –ø—É—Ç—å, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```bash
VITE_REVERB_PATH=/custom-path
```

**–í–∞–∂–Ω–æ**: 
- –ù–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Ç–µ `wsPath = ""` - —ç—Ç–æ —Å–æ–∑–¥–∞—Å—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL
- –î–ª—è Reverb –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `/app` –∏–ª–∏ –Ω–µ —É–∫–∞–∑—ã–≤–∞–π—Ç–µ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
```

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

### –ö–ª—é—á–µ–≤—ã–µ –≤—ã–≤–æ–¥—ã

1. **Laravel Reverb –≤—Å–µ–≥–¥–∞ —Å–ª—É—à–∞–µ—Ç –Ω–∞ `/app`**
   - –≠—Ç–æ —Ö–∞—Ä–¥–∫–æ–¥ –≤ Reverb —Å–µ—Ä–≤–µ—Ä–µ
   - –ù–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç `REVERB_SERVER_PATH` –∏–ª–∏ `REVERB_CLIENT_PATH`

2. **pusher-js –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `/app`**
   - –ï—Å–ª–∏ `wsPath` –Ω–µ —É–∫–∞–∑–∞–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `/app`
   - –ï—Å–ª–∏ `wsPath = ""`, –ø—É—Ç—å –Ω–µ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è ‚ùå

3. **–ü—Ä–æ–±–ª–µ–º–∞ –≤ —Ç–µ–∫—É—â–µ–º –∫–æ–¥–µ**
   - –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è `wsPath = ""` –∫–æ–≥–¥–∞ –ø—É—Ç—å –Ω–µ —É–∫–∞–∑–∞–Ω
   - –≠—Ç–æ —Å–æ–∑–¥–∞–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL
   - ~400 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞ –ø—ã—Ç–∞—é—Ç—Å—è –∏—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É

4. **–ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ**
   - –ù–µ —É–∫–∞–∑—ã–≤–∞—Ç—å `wsPath` –µ—Å–ª–∏ –Ω–µ –∑–∞–¥–∞–Ω —è–≤–Ω–æ
   - –ò–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `wsPath = "/app"` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
   - –£–¥–∞–ª–∏—Ç—å –≤–µ—Å—å –∫–æ–¥ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è wsPath

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

1. üî¥ **–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô**: –ò—Å–ø—Ä–∞–≤–∏—Ç—å `resolvePath()` –∏ `buildEchoConfig()`
2. üî¥ **–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô**: –£–¥–∞–ª–∏—Ç—å –≤–µ—Å—å –∫–æ–¥ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è wsPath (~400 —Å—Ç—Ä–æ–∫)
3. üü° **–í–ê–ñ–ù–û**: –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
4. üü¢ **–ñ–ï–õ–ê–¢–ï–õ–¨–ù–û**: –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

---

*–ê–Ω–∞–ª–∏–∑ –≤—ã–ø–æ–ª–Ω–µ–Ω –Ω–∞ –æ—Å–Ω–æ–≤–µ:*
*- [Laravel Reverb –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://laravel.com/docs/12.x/reverb)*
*- [pusher-js npm package](https://www.npmjs.com/package/pusher-js)*
*- –¢–µ–∫—É—â–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞*

*–î–∞—Ç–∞: 2024*

