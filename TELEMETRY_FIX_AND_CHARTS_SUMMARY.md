# –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏ –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–æ–≤

## üìã –ó–∞–¥–∞—á–∞

**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–æ–¥–∞ `nd-clim-esp3278e` –±—ã–ª–∞ –æ–Ω–ª–∞–π–Ω, –Ω–æ –Ω–µ –ø—É–±–ª–∏–∫–æ–≤–∞–ª–∞ —Ç–µ–ª–µ–º–µ—Ç—Ä–∏—é –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥. NodeConfig –ø–æ–∫–∞–∑—ã–≤–∞–ª `"channels": []`.

## ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∫–∞–Ω–∞–ª–æ–≤ –ø—Ä–∏ node_hello

**–§–∞–π–ª**: `backend/laravel/app/Services/NodeRegistryService.php`

#### –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `syncNodeChannelsFromCapabilities()`:
- –°–æ–∑–¥–∞—ë—Ç –∑–∞–ø–∏—Å–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ `node_channels` –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–∞—Å—Å–∏–≤–∞ `capabilities` –∏–∑ —Å–æ–æ–±—â–µ–Ω–∏—è `node_hello`
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—Å–µ —Ç–∏–ø—ã –Ω–æ–¥: climate, ph, ec, pump
- –ú–∞–ø–ø–∏–Ω–≥ capability ‚Üí channel configuration (type, metric, unit)

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ capabilities:**
```php
'temperature' => ['type' => 'sensor', 'metric' => 'TEMP_AIR', 'unit' => '¬∞C']
'humidity' => ['type' => 'sensor', 'metric' => 'HUMIDITY', 'unit' => '%']
'co2' => ['type' => 'sensor', 'metric' => 'CO2', 'unit' => 'ppm']
'lighting' => ['type' => 'actuator', 'metric' => 'LIGHT', 'unit' => '']
'ventilation' => ['type' => 'actuator', 'metric' => 'VENTILATION', 'unit' => '']
'ph_sensor' => ['type' => 'sensor', 'metric' => 'PH', 'unit' => 'pH']
'ec_sensor' => ['type' => 'sensor', 'metric' => 'EC', 'unit' => 'mS/cm']
'pump_A/B/C/D' => ['type' => 'actuator', 'metric' => 'PUMP_*', 'unit' => '']
```

### 2. –°–æ–∑–¥–∞–Ω–∞ Artisan –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –Ω–æ–¥

**–§–∞–π–ª**: `backend/laravel/app/Console/Commands/SyncNodeChannels.php`

```bash
# –î–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –Ω–æ–¥—ã
php artisan nodes:sync-channels --node-uid=nd-clim-esp3278e

# –î–ª—è –≤—Å–µ—Ö –Ω–æ–¥
php artisan nodes:sync-channels --all

# –†–µ–∂–∏–º dry-run
php artisan nodes:sync-channels --node-uid=nd-clim-esp3278e --dry-run
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç –¥–ª—è nd-clim-esp3278e:**
```
‚úì Created channel 'temperature' (sensor, TEMP_AIR)
‚úì Created channel 'humidity' (sensor, HUMIDITY)
‚úì Created channel 'co2' (sensor, CO2)
‚úì Created channel 'lighting' (actuator, LIGHT)
‚úì Created channel 'ventilation' (actuator, VENTILATION)
Summary: Created=5, Skipped=0
```

### 3. –î–æ–±–∞–≤–ª–µ–Ω—ã –≥—Ä–∞—Ñ–∏–∫–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

#### Backend API

**–§–∞–π–ª**: `backend/laravel/app/Http/Controllers/TelemetryController.php`

–ù–æ–≤—ã–π endpoint:
```
GET /api/nodes/{id}/telemetry/history
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `metric` (required) - TEMP_AIR, HUMIDITY, CO2, PH, EC
- `channel` (optional) - –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–∞
- `from` (optional) - –Ω–∞—á–∞–ª–æ –ø–µ—Ä–∏–æ–¥–∞ (ISO 8601)
- `to` (optional) - –∫–æ–Ω–µ—Ü –ø–µ—Ä–∏–æ–¥–∞ (ISO 8601)

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –Ω–æ–¥–µ —á–µ—Ä–µ–∑ `ZoneAccessHelper`
- ‚úÖ –õ–∏–º–∏—Ç 5000 –∑–∞–ø–∏—Å–µ–π
- ‚úÖ –î–∞–Ω–Ω—ã–µ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `telemetry` (TimescaleDB)

#### Frontend

**–§–∞–π–ª**: `backend/laravel/resources/js/Pages/Devices/Show.vue`

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
- üìä –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `MultiSeriesTelemetryChart` - –º—É–ª—å—Ç–∏-—Å–µ—Ä–∏–π–Ω—ã–π –≥—Ä–∞—Ñ–∏–∫
- üé® –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ü–≤–µ—Ç–∞ –¥–ª—è –∫–∞–∂–¥–æ–π –º–µ—Ç—Ä–∏–∫–∏
- ‚è±Ô∏è –í—ã–±–æ—Ä –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞: 1H, 24H, 7D, 30D, ALL
- üîÑ –ê–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- üìà –í—Å–µ —Å–µ–Ω—Å–æ—Ä–Ω—ã–µ –∫–∞–Ω–∞–ª—ã –Ω–∞ –æ–¥–Ω–æ–º –≥—Ä–∞—Ñ–∏–∫–µ

**–¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞:**
- –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ (TEMP_AIR): üü† amber-500 (#f59e0b)
- –í–ª–∞–∂–Ω–æ—Å—Ç—å (HUMIDITY): üîµ blue-500 (#3b82f6)
- CO‚ÇÇ (CO2): üü¢ emerald-500 (#10b981)
- pH (PH): üü£ violet-500 (#8b5cf6)
- EC (EC): üî∑ cyan-500 (#06b6d4)

### 4. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –±–∞–≥–∏

#### –ë–∞–≥ 1: TypeError - value.toFixed is not a function
**–ü—Ä–∏—á–∏–Ω–∞**: `currentValue` –º–æ–∂–µ—Ç –±—ã—Ç—å `null`, –Ω–æ `formatValue()` –≤—ã–∑—ã–≤–∞–µ—Ç `.toFixed()`

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** (`MultiSeriesTelemetryChart.vue`):
```typescript
const formatValue = (value: number | null | undefined, seriesName: string): string => {
  if (value === null || value === undefined || typeof value !== 'number' || isNaN(value)) {
    return '‚Äî'
  }
  const isPH = seriesName.toLowerCase().includes('ph')
  return value.toFixed(isPH ? 2 : 1)
}
```

#### –ë–∞–≥ 2: yAxis "0" not found
**–ü—Ä–∏—á–∏–Ω–∞**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ `yAxisIndex: index` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–∞–Ω–∞–ª–∞ (0,1,2,3,4...), –Ω–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ 2 –æ—Å–∏

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** (`Devices/Show.vue`):
```typescript
// –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ç–æ–ª—å–∫–æ 2 –æ—Å–∏: –ª–µ–≤—É—é (0) –∏ –ø—Ä–∞–≤—É—é (1)
let yAxisIndex = 0
if (index === 1 || metric === 'HUMIDITY' || metric === 'CO2') {
  yAxisIndex = 1
}
```

## üìä –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è

### –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 1. Firmware (ESP32)                                         ‚îÇ
‚îÇ    ‚îî‚îÄ> node_hello —Å capabilities ["temperature", ...]      ‚îÇ
‚îÇ        ‚îî‚îÄ> MQTT: hydro/node_hello                          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 2. History Logger                                           ‚îÇ
‚îÇ    ‚îî‚îÄ> –ü–æ–ª—É—á–∞–µ—Ç node_hello                                 ‚îÇ
‚îÇ    ‚îî‚îÄ> POST /api/nodes/register                            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 3. Laravel (NodeRegistryService)                            ‚îÇ
‚îÇ    ‚îî‚îÄ> registerNodeFromHello()                             ‚îÇ
‚îÇ    ‚îî‚îÄ> syncNodeChannelsFromCapabilities()                  ‚îÇ
‚îÇ        ‚îî‚îÄ> –°–æ–∑–¥–∞—ë—Ç –∑–∞–ø–∏—Å–∏ –≤ node_channels                  ‚îÇ
‚îÇ        ‚îî‚îÄ> NodeConfigUpdated event ‚Üí MQTT config publish   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 4. Firmware –ø–æ–ª—É—á–∞–µ—Ç config                                ‚îÇ
‚îÇ    ‚îî‚îÄ> –ù–∞—á–∏–Ω–∞–µ—Ç –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å —Ç–µ–ª–µ–º–µ—Ç—Ä–∏—é                     ‚îÇ
‚îÇ        ‚îî‚îÄ> MQTT: hydro/.../temperature/telemetry           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 5. History Logger                                           ‚îÇ
‚îÇ    ‚îî‚îÄ> –ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤ TimescaleDB (telemetry table)         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 6. Frontend (Vue)                                           ‚îÇ
‚îÇ    ‚îî‚îÄ> GET /api/nodes/{id}/telemetry/history              ‚îÇ
‚îÇ    ‚îî‚îÄ> MultiSeriesTelemetryChart                          ‚îÇ
‚îÇ        ‚îî‚îÄ> –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –≥—Ä–∞—Ñ–∏–∫–∏                             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –î–ª—è –Ω–æ–¥—ã nd-clim-esp3278e:

**–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
```json
{
  "channels": [],
  "status": "online"
}
```

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
```json
{
  "channels": [
    {"channel": "temperature", "type": "sensor", "metric": "TEMP_AIR", "unit": "¬∞C"},
    {"channel": "humidity", "type": "sensor", "metric": "HUMIDITY", "unit": "%"},
    {"channel": "co2", "type": "sensor", "metric": "CO2", "unit": "ppm"},
    {"channel": "lighting", "type": "actuator", "metric": "LIGHT"},
    {"channel": "ventilation", "type": "actuator", "metric": "VENTILATION"}
  ],
  "status": "online"
}
```

### –¢–µ–ª–µ–º–µ—Ç—Ä–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç:

```
[TELEMETRY] Received: node=nd-clim-esp3278e, metric=TEMPERATURE, value=21.015869140625
[TELEMETRY] Written: zone_id=5, node_id=2, metric=TEMPERATURE, count=1
[TELEMETRY] Received: node=nd-clim-esp3278e, metric=HUMIDITY, value=48.66254806518555
[TELEMETRY] Written: zone_id=5, node_id=2, metric=HUMIDITY, count=1
```

### –ì—Ä–∞—Ñ–∏–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è:

**URL**: `/devices/2`

- üìä –ú—É–ª—å—Ç–∏-—Å–µ—Ä–∏–π–Ω—ã–π –≥—Ä–∞—Ñ–∏–∫ —Å 3 –ª–∏–Ω–∏—è–º–∏ (temperature, humidity, CO‚ÇÇ)
- üé® –ö–∞–∂–¥–∞—è –º–µ—Ç—Ä–∏–∫–∞ —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º —Ü–≤–µ—Ç–æ–º
- ‚è±Ô∏è –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç
- üîç Zoom –∏ pan —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É—é—Ç
- üì• –≠–∫—Å–ø–æ—Ä—Ç –≤ CSV –¥–æ—Å—Ç—É–ø–µ–Ω

## üìç –ì–¥–µ —Å–º–æ—Ç—Ä–µ—Ç—å –≥—Ä–∞—Ñ–∏–∫–∏

### 1. –°—Ç—Ä–∞–Ω–∏—Ü–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (–Ω–æ–≤–æ–µ!)
```
/devices/{id}
```
**–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç**: –¢–µ–ª–µ–º–µ—Ç—Ä–∏—é –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –Ω–æ–¥—ã –ø–æ –≤—Å–µ–º –µ—ë –∫–∞–Ω–∞–ª–∞–º

### 2. –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–æ–Ω—ã
```
/zones/{id}
```
**–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç**: –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Ç–µ–ª–µ–º–µ—Ç—Ä–∏—é –≤—Å–µ—Ö –Ω–æ–¥ –∑–æ–Ω—ã

### 3. Dashboard
```
/dashboard
```
**–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç**: –ú–∏–Ω–∏-–≥—Ä–∞—Ñ–∏–∫–∏ –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∑–æ–Ω—ã

## üì¶ –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω–∏–π

### Backend:
1. `backend/laravel/app/Services/NodeRegistryService.php` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–æ–≤
2. `backend/laravel/app/Console/Commands/SyncNodeChannels.php` - –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –Ω–æ–¥
3. `backend/laravel/app/Http/Controllers/TelemetryController.php` - API endpoint –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏ –Ω–æ–¥—ã
4. `backend/laravel/routes/api.php` - –Ω–æ–≤—ã–π —Ä–æ—É—Ç

### Frontend:
1. `backend/laravel/resources/js/Pages/Devices/Show.vue` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –≥—Ä–∞—Ñ–∏–∫–∏
2. `backend/laravel/resources/js/Components/MultiSeriesTelemetryChart.vue` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –±–∞–≥ —Å formatValue

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
1. `TELEMETRY_CHANNELS_FIX.md` - –¥–µ—Ç–∞–ª–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–∞–Ω–∞–ª–æ–≤
2. `NODE_TELEMETRY_CHARTS.md` - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –≥—Ä–∞—Ñ–∏–∫–∞–º
3. `TELEMETRY_FIX_AND_CHARTS_SUMMARY.md` - –∏—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á—ë—Ç (—ç—Ç–æ—Ç —Ñ–∞–π–ª)

## üöÄ –î–ª—è –Ω–æ–≤—ã—Ö –Ω–æ–¥

–í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. –ù–æ–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `node_hello` —Å –º–∞—Å—Å–∏–≤–æ–º `capabilities`
2. Backend –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç –∫–∞–Ω–∞–ª—ã
3. NodeConfig –ø—É–±–ª–∏–∫—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ MQTT
4. –ù–æ–¥–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å —Ç–µ–ª–µ–º–µ—Ç—Ä–∏—é
5. –ì—Ä–∞—Ñ–∏–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—è–≤–ª—è—é—Ç—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

**–ù–∏—á–µ–≥–æ –¥–µ–ª–∞—Ç—å –≤—Ä—É—á–Ω—É—é –Ω–µ –Ω—É–∂–Ω–æ! üéâ**

## üîß –î–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –Ω–æ–¥

–ï—Å–ª–∏ –Ω–æ–¥–∞ —É–∂–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∞, –Ω–æ –±–µ–∑ –∫–∞–Ω–∞–ª–æ–≤:

```bash
cd /home/georgiy/esp/hydro/hydro2.0/backend
docker compose -f docker-compose.dev.yml exec laravel \
  php artisan nodes:sync-channels --node-uid=<node-uid>
```

## ‚ú® –ò—Ç–æ–≥

‚úÖ **–ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é**
‚úÖ **–¢–µ–ª–µ–º–µ—Ç—Ä–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç**
‚úÖ **–ì—Ä–∞—Ñ–∏–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è**
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –¥–ª—è –Ω–æ–≤—ã—Ö –Ω–æ–¥**
‚úÖ **–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –Ω–æ–¥**
‚úÖ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞**

üéØ **–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞!**

