# Настройка для работы в Android эмуляторе

## Важно для эмулятора

В Android эмуляторе `localhost` указывает на сам эмулятор, а не на хост-машину. Для доступа к серверу на хост-машине используется специальный IP адрес **`10.0.2.2`**.

## Конфигурация

Конфигурация уже настроена для работы в эмуляторе:
- **API URL**: `http://10.0.2.2:8080`
- Файл: `app/src/main/assets/configs/env.dev.json`

## Шаги для входа в приложение

1. **Убедитесь, что бэкенд запущен на порту 8080:**
   ```bash
   # Проверьте, что Laravel сервер запущен
   cd backend/laravel
   php artisan serve --host=0.0.0.0 --port=8080
   ```

2. **Запустите эмулятор Android Studio**

3. **Соберите и установите приложение:**
   ```bash
   cd mobile/app/android
   ./gradlew installDevDebug
   ```
   Или используйте Android Studio: Run → Run 'app'

4. **Войдите в приложение используя тестовые учетные данные:**
   - **Email**: `admin@example.com`
   - **Пароль**: `password`

   Или другие тестовые учетные записи:
   - `operator@example.com` / `password`
   - `viewer@example.com` / `password`

## Проверка подключения

Если не получается подключиться:

1. **Проверьте, что бэкенд доступен:**
   ```bash
   curl http://localhost:8080/api/health
   # или
   curl http://10.0.2.2:8080/api/health
   ```

2. **Проверьте логи приложения в Android Studio:**
   - Logcat → фильтр по "ConfigLoader" или "NetworkModule"
   - Должен быть виден URL: `http://10.0.2.2:8080`

3. **Проверьте, что бэкенд слушает на всех интерфейсах:**
   - Используйте `--host=0.0.0.0` при запуске Laravel сервера
   - Это необходимо для доступа из эмулятора

## Для реального устройства

Если вы используете реальное Android устройство:
1. Узнайте IP адрес вашего компьютера в локальной сети
2. Обновите `env.dev.json`: замените `10.0.2.2` на IP адрес вашего компьютера
3. Убедитесь, что устройство и компьютер в одной сети
4. Убедитесь, что бэкенд слушает на `0.0.0.0:8080`

## Альтернатива: использование ADB port forwarding

Если не хотите менять конфигурацию, можно использовать port forwarding:

```bash
adb reverse tcp:8080 tcp:8080
```

После этого в приложении можно использовать `http://localhost:8080`.

