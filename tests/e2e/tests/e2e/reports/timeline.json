{
  "test_suite": "E14_command_response_before_sent",
  "generated_at": "2025-12-25T21:58:51.110966",
  "test_cases": [
    {
      "name": "start_node_simulator",
      "status": "passed",
      "duration": 5.6464684009552,
      "error_message": null,
      "steps": [
        {
          "name": "start_node_simulator",
          "status": "passed"
        }
      ],
      "timestamp": "2025-12-25T21:58:19.403169"
    },
    {
      "name": "get_zones",
      "status": "passed",
      "duration": 0.07618236541748047,
      "error_message": null,
      "steps": [
        {
          "name": "get_zones",
          "status": "passed"
        }
      ],
      "timestamp": "2025-12-25T21:58:19.479629"
    },
    {
      "name": "get_nodes",
      "status": "passed",
      "duration": 0.05931496620178223,
      "error_message": null,
      "steps": [
        {
          "name": "get_nodes",
          "status": "passed"
        }
      ],
      "timestamp": "2025-12-25T21:58:19.538968"
    },
    {
      "name": "set_zone_and_node",
      "status": "passed",
      "duration": 6.4373016357421875e-06,
      "error_message": null,
      "steps": [
        {
          "name": "set_zone_and_node",
          "status": "passed"
        }
      ],
      "timestamp": "2025-12-25T21:58:19.539021"
    },
    {
      "name": "subscribe_zone_channel",
      "status": "passed",
      "duration": 0.1792466640472412,
      "error_message": null,
      "steps": [
        {
          "name": "subscribe_zone_channel",
          "status": "passed"
        }
      ],
      "timestamp": "2025-12-25T21:58:19.718284"
    },
    {
      "name": "send_command",
      "status": "skipped",
      "duration": 21.096755743026733,
      "error_message": "Server error '503 Service Unavailable' for url 'http://localhost:8081/api/nodes/1/commands'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/503",
      "steps": [
        {
          "name": "send_command",
          "status": "skipped",
          "error": "Server error '503 Service Unavailable' for url 'http://localhost:8081/api/nodes/1/commands'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/503"
        }
      ],
      "timestamp": "2025-12-25T21:58:40.815135"
    },
    {
      "name": "set_command_id_from_response",
      "status": "passed",
      "duration": 7.152557373046875e-06,
      "error_message": null,
      "steps": [
        {
          "name": "set_command_id_from_response",
          "status": "passed"
        }
      ],
      "timestamp": "2025-12-25T21:58:40.815344"
    },
    {
      "name": "create_command_manually_if_needed",
      "status": "failed",
      "duration": 0.008067131042480469,
      "error_message": "null value in column \"cmd_id\" of relation \"commands\" violates not-null constraint\nDETAIL:  Failing row contains (1373, 225, 1, main_pump, set_relay_state, {\"state\": true}, QUEUED, null, 2025-12-25 18:58:41, 2025-12-25 18:58:41, null, null, null, test, null, null, 0, null, null, manual, null, null, null).",
      "steps": [
        {
          "name": "create_command_manually_if_needed",
          "status": "failed",
          "error": "null value in column \"cmd_id\" of relation \"commands\" violates not-null constraint\nDETAIL:  Failing row contains (1373, 225, 1, main_pump, set_relay_state, {\"state\": true}, QUEUED, null, 2025-12-25 18:58:41, 2025-12-25 18:58:41, null, null, null, test, null, null, 0, null, null, manual, null, null, null)."
        }
      ],
      "timestamp": "2025-12-25T21:58:40.823585"
    },
    {
      "name": "final_status_is_done",
      "status": "failed",
      "duration": 2.5510787963867188e-05,
      "error_message": "Обязательная переменная 'command_id' разрешена в пустое значение. Убедитесь, что предыдущие шаги (API/DB) корректно заполнили контекст. Текущее значение: ''",
      "steps": [
        {
          "name": "final_status_is_done",
          "status": "failed",
          "error": "Обязательная переменная 'command_id' разрешена в пустое значение. Убедитесь, что предыдущие шаги (API/DB) корректно заполнили контекст. Текущее значение: ''"
        }
      ],
      "timestamp": "2025-12-25T21:58:40.823666"
    }
  ],
  "timeline": [],
  "artifacts": {
    "E14_command_response_before_sent": {
      "ws_messages": [
        {
          "data": {
            "event": "pusher_internal:subscription_succeeded",
            "data": "{}",
            "channel": "private-hydro.zones.225"
          },
          "timestamp": "2025-12-25T21:58:19.621026"
        }
      ],
      "mqtt_messages": [],
      "api_responses": [],
      "context_vars": {
        "zone_id": 225,
        "node_id": 1,
        "test_zone_id": "225",
        "test_node_id": "1",
        "command_id": ""
      }
    }
  }
}