{
  "test_suite": "E02_command_happy",
  "generated_at": "2025-12-12T22:25:53.075021",
  "test_cases": [
    {
      "name": "Check system health",
      "status": "passed",
      "duration": 0.10132217407226562,
      "error_message": null,
      "steps": [
        {
          "name": "Check system health",
          "status": "passed"
        }
      ],
      "timestamp": "2025-12-12T22:25:51.757458"
    },
    {
      "name": "Get zones",
      "status": "passed",
      "duration": 0.06871223449707031,
      "error_message": null,
      "steps": [
        {
          "name": "Get zones",
          "status": "passed"
        }
      ],
      "timestamp": "2025-12-12T22:25:51.826175"
    },
    {
      "name": "Get nodes",
      "status": "passed",
      "duration": 0.06795287132263184,
      "error_message": null,
      "steps": [
        {
          "name": "Get nodes",
          "status": "passed"
        }
      ],
      "timestamp": "2025-12-12T22:25:51.894133"
    },
    {
      "name": "Find test node",
      "status": "passed",
      "duration": 0.00019311904907226562,
      "error_message": null,
      "steps": [
        {
          "name": "Find test node",
          "status": "passed"
        }
      ],
      "timestamp": "2025-12-12T22:25:51.894331"
    },
    {
      "name": "Subscribe to command channel",
      "status": "passed",
      "duration": 0.10098600387573242,
      "error_message": null,
      "steps": [
        {
          "name": "Subscribe to command channel",
          "status": "passed"
        }
      ],
      "timestamp": "2025-12-12T22:25:51.995322"
    },
    {
      "name": "Subscribe to zone channel",
      "status": "passed",
      "duration": 0.07780838012695312,
      "error_message": null,
      "steps": [
        {
          "name": "Subscribe to zone channel",
          "status": "passed"
        }
      ],
      "timestamp": "2025-12-12T22:25:52.073135"
    },
    {
      "name": "Send command to node",
      "status": "passed",
      "duration": 0.0896446704864502,
      "error_message": null,
      "steps": [
        {
          "name": "Send command to node",
          "status": "passed"
        }
      ],
      "timestamp": "2025-12-12T22:25:52.162784"
    },
    {
      "name": "Save command ID",
      "status": "passed",
      "duration": 6.198883056640625e-05,
      "error_message": null,
      "steps": [
        {
          "name": "Save command ID",
          "status": "passed"
        }
      ],
      "timestamp": "2025-12-12T22:25:52.162849"
    },
    {
      "name": "Wait for command status update (SENT)",
      "status": "passed",
      "duration": 0.9025578498840332,
      "error_message": null,
      "steps": [
        {
          "name": "Wait for command status update (SENT)",
          "status": "passed"
        }
      ],
      "timestamp": "2025-12-12T22:25:53.065411"
    },
    {
      "name": "Check command status in DB",
      "status": "passed",
      "duration": 0.009011030197143555,
      "error_message": null,
      "steps": [
        {
          "name": "Check command status in DB",
          "status": "passed"
        }
      ],
      "timestamp": "2025-12-12T22:25:53.074426"
    },
    {
      "name": "Assert command status is SENT",
      "status": "failed",
      "duration": 0.00016069412231445312,
      "error_message": "Expected SENT, but got QUEUED",
      "steps": [
        {
          "name": "Assert command status is SENT",
          "status": "failed",
          "error": "Expected SENT, but got QUEUED"
        }
      ],
      "timestamp": "2025-12-12T22:25:53.074611"
    }
  ],
  "timeline": [
    {
      "timestamp": "2025-12-12T22:25:51.656347",
      "type": "api.get",
      "description": "Executing Check system health",
      "data": {}
    },
    {
      "timestamp": "2025-12-12T22:25:51.757446",
      "type": "api.get",
      "description": "Completed Check system health",
      "data": {
        "duration": 0.10108804702758789,
        "result": {
          "status": "ok",
          "data": {
            "app": "ok",
            "db": "ok",
            "mqtt": "ok",
            "history_logger": "ok",
            "automation_engine": "ok",
            "chain": {
              "db": "ok",
              "mqtt": "ok",
              "websocket": "unknown",
              "ui": "ok"
            }
          },
          "meta": {
            "timestamp": "2025-12-12T19:25:51+00:00",
            "db_error": null,
            "checks": {
              "db_timeout": "2s",
              "mqtt_timeout": "2s",
              "history_logger_timeout": "3s",
              "automation_engine_timeout": "2s"
            }
          }
        }
      }
    },
    {
      "timestamp": "2025-12-12T22:25:51.757509",
      "type": "api.get",
      "description": "Executing Get zones",
      "data": {}
    },
    {
      "timestamp": "2025-12-12T22:25:51.826167",
      "type": "api.get",
      "description": "Completed Get zones",
      "data": {
        "duration": 0.06864452362060547,
        "result": {
          "status": "ok",
          "data": {
            "current_page": 1,
            "data": [
              {
                "id": 1,
                "greenhouse_id": 1,
                "name": "E2E Zone 1",
                "description": "Deterministic zone for E2E scenarios",
                "status": "offline",
                "created_at": "2025-12-12T18:45:42.000000Z",
                "updated_at": "2025-12-12T18:45:42.000000Z",
                "preset_id": null,
                "hardware_profile": null,
                "capabilities": null,
                "health_score": null,
                "health_status": null,
                "uid": "zn-test-1",
                "settings": null,
                "nodes_count": 1,
                "greenhouse": {
                  "id": 1,
                  "name": "E2E Greenhouse"
                },
                "preset": null
              }
            ],
            "first_page_url": "http://localhost:8081/api/zones?page=1",
            "from": 1,
            "last_page": 1,
            "last_page_url": "http://localhost:8081/api/zones?page=1",
            "links": [
              {
                "url": null,
                "label": "&laquo; Previous",
                "page": null,
                "active": false
              },
              {
                "url": "http://localhost:8081/api/zones?page=1",
                "label": "1",
                "page": 1,
                "active": true
              },
              {
                "url": null,
                "label": "Next &raquo;",
                "page": null,
                "active": false
              }
            ],
            "next_page_url": null,
            "path": "http://localhost:8081/api/zones",
            "per_page": 25,
            "prev_page_url": null,
            "to": 1,
            "total": 1
          }
        }
      }
    },
    {
      "timestamp": "2025-12-12T22:25:51.826221",
      "type": "api.get",
      "description": "Executing Get nodes",
      "data": {}
    },
    {
      "timestamp": "2025-12-12T22:25:51.894122",
      "type": "api.get",
      "description": "Completed Get nodes",
      "data": {
        "duration": 0.06789493560791016,
        "result": {
          "status": "ok",
          "data": {
            "current_page": 1,
            "data": [
              {
                "id": 1,
                "uid": "nd-ph-test-1",
                "name": "E2E Node (pH)",
                "type": "ph",
                "zone_id": 1,
                "status": "online",
                "lifecycle_state": "ASSIGNED_TO_ZONE",
                "fw_version": "e2e",
                "hardware_revision": null,
                "hardware_id": "esp32-test-001",
                "validated": false,
                "first_seen_at": null,
                "created_at": "2025-12-12T18:45:42.000000Z",
                "updated_at": "2025-12-12T19:25:34.000000Z",
                "zone": {
                  "id": 1,
                  "name": "E2E Zone 1",
                  "status": "offline"
                },
                "channels": [
                  {
                    "id": 5,
                    "node_id": 1,
                    "channel": "air_rh",
                    "type": "sensor",
                    "metric": "AIR_RH",
                    "unit": "%"
                  },
                  {
                    "id": 4,
                    "node_id": 1,
                    "channel": "air_temp_c",
                    "type": "sensor",
                    "metric": "AIR_TEMP_C",
                    "unit": "C"
                  },
                  {
                    "id": 7,
                    "node_id": 1,
                    "channel": "drain_pump",
                    "type": "actuator",
                    "metric": "RELAY",
                    "unit": "bool"
                  },
                  {
                    "id": 2,
                    "node_id": 1,
                    "channel": "ec",
                    "type": "sensor",
                    "metric": "EC",
                    "unit": "mS/cm"
                  },
                  {
                    "id": 8,
                    "node_id": 1,
                    "channel": "fan",
                    "type": "actuator",
                    "metric": "RELAY",
                    "unit": "bool"
                  },
                  {
                    "id": 9,
                    "node_id": 1,
                    "channel": "heater",
                    "type": "actuator",
                    "metric": "RELAY",
                    "unit": "bool"
                  },
                  {
                    "id": 10,
                    "node_id": 1,
                    "channel": "light",
                    "type": "actuator",
                    "metric": "RELAY",
                    "unit": "bool"
                  },
                  {
                    "id": 6,
                    "node_id": 1,
                    "channel": "main_pump",
                    "type": "actuator",
                    "metric": "RELAY",
                    "unit": "bool"
                  },
                  {
                    "id": 11,
                    "node_id": 1,
                    "channel": "mister",
                    "type": "actuator",
                    "metric": "RELAY",
                    "unit": "bool"
                  },
                  {
                    "id": 1,
                    "node_id": 1,
                    "channel": "ph",
                    "type": "sensor",
                    "metric": "PH",
                    "unit": "pH"
                  },
                  {
                    "id": 3,
                    "node_id": 1,
                    "channel": "solution_temp_c",
                    "type": "sensor",
                    "metric": "SOLUTION_TEMP_C",
                    "unit": "C"
                  }
                ]
              }
            ],
            "first_page_url": "http://localhost:8081/api/nodes?page=1",
            "from": 1,
            "last_page": 1,
            "last_page_url": "http://localhost:8081/api/nodes?page=1",
            "links": [
              {
                "url": null,
                "label": "&laquo; Previous",
                "page": null,
                "active": false
              },
              {
                "url": "http://localhost:8081/api/nodes?page=1",
                "label": "1",
                "page": 1,
                "active": true
              },
              {
                "url": null,
                "label": "Next &raquo;",
                "page": null,
                "active": false
              }
            ],
            "next_page_url": null,
            "path": "http://localhost:8081/api/nodes",
            "per_page": 25,
            "prev_page_url": null,
            "to": 1,
            "total": 1
          }
        }
      }
    },
    {
      "timestamp": "2025-12-12T22:25:51.894311",
      "type": "set",
      "description": "Executing Find test node",
      "data": {
        "test_zone_id": "1",
        "test_node_id": "1"
      }
    },
    {
      "timestamp": "2025-12-12T22:25:51.894327",
      "type": "set",
      "description": "Completed Find test node",
      "data": {
        "duration": 1.0728836059570312e-05,
        "result": {
          "TIMESTAMP_S": 1765567551,
          "TIMESTAMP_MS": 1765567551000,
          "health": {
            "status": "ok",
            "data": {
              "app": "ok",
              "db": "ok",
              "mqtt": "ok",
              "history_logger": "ok",
              "automation_engine": "ok",
              "chain": {
                "db": "ok",
                "mqtt": "ok",
                "websocket": "unknown",
                "ui": "ok"
              }
            },
            "meta": {
              "timestamp": "2025-12-12T19:25:51+00:00",
              "db_error": null,
              "checks": {
                "db_timeout": "2s",
                "mqtt_timeout": "2s",
                "history_logger_timeout": "3s",
                "automation_engine_timeout": "2s"
              }
            }
          },
          "zones": {
            "status": "ok",
            "data": {
              "current_page": 1,
              "data": [
                {
                  "id": 1,
                  "greenhouse_id": 1,
                  "name": "E2E Zone 1",
                  "description": "Deterministic zone for E2E scenarios",
                  "status": "offline",
                  "created_at": "2025-12-12T18:45:42.000000Z",
                  "updated_at": "2025-12-12T18:45:42.000000Z",
                  "preset_id": null,
                  "hardware_profile": null,
                  "capabilities": null,
                  "health_score": null,
                  "health_status": null,
                  "uid": "zn-test-1",
                  "settings": null,
                  "nodes_count": 1,
                  "greenhouse": {
                    "id": 1,
                    "name": "E2E Greenhouse"
                  },
                  "preset": null
                }
              ],
              "first_page_url": "http://localhost:8081/api/zones?page=1",
              "from": 1,
              "last_page": 1,
              "last_page_url": "http://localhost:8081/api/zones?page=1",
              "links": [
                {
                  "url": null,
                  "label": "&laquo; Previous",
                  "page": null,
                  "active": false
                },
                {
                  "url": "http://localhost:8081/api/zones?page=1",
                  "label": "1",
                  "page": 1,
                  "active": true
                },
                {
                  "url": null,
                  "label": "Next &raquo;",
                  "page": null,
                  "active": false
                }
              ],
              "next_page_url": null,
              "path": "http://localhost:8081/api/zones",
              "per_page": 25,
              "prev_page_url": null,
              "to": 1,
              "total": 1
            }
          },
          "nodes": {
            "status": "ok",
            "data": {
              "current_page": 1,
              "data": [
                {
                  "id": 1,
                  "uid": "nd-ph-test-1",
                  "name": "E2E Node (pH)",
                  "type": "ph",
                  "zone_id": 1,
                  "status": "online",
                  "lifecycle_state": "ASSIGNED_TO_ZONE",
                  "fw_version": "e2e",
                  "hardware_revision": null,
                  "hardware_id": "esp32-test-001",
                  "validated": false,
                  "first_seen_at": null,
                  "created_at": "2025-12-12T18:45:42.000000Z",
                  "updated_at": "2025-12-12T19:25:34.000000Z",
                  "zone": {
                    "id": 1,
                    "name": "E2E Zone 1",
                    "status": "offline"
                  },
                  "channels": [
                    {
                      "id": 5,
                      "node_id": 1,
                      "channel": "air_rh",
                      "type": "sensor",
                      "metric": "AIR_RH",
                      "unit": "%"
                    },
                    {
                      "id": 4,
                      "node_id": 1,
                      "channel": "air_temp_c",
                      "type": "sensor",
                      "metric": "AIR_TEMP_C",
                      "unit": "C"
                    },
                    {
                      "id": 7,
                      "node_id": 1,
                      "channel": "drain_pump",
                      "type": "actuator",
                      "metric": "RELAY",
                      "unit": "bool"
                    },
                    {
                      "id": 2,
                      "node_id": 1,
                      "channel": "ec",
                      "type": "sensor",
                      "metric": "EC",
                      "unit": "mS/cm"
                    },
                    {
                      "id": 8,
                      "node_id": 1,
                      "channel": "fan",
                      "type": "actuator",
                      "metric": "RELAY",
                      "unit": "bool"
                    },
                    {
                      "id": 9,
                      "node_id": 1,
                      "channel": "heater",
                      "type": "actuator",
                      "metric": "RELAY",
                      "unit": "bool"
                    },
                    {
                      "id": 10,
                      "node_id": 1,
                      "channel": "light",
                      "type": "actuator",
                      "metric": "RELAY",
                      "unit": "bool"
                    },
                    {
                      "id": 6,
                      "node_id": 1,
                      "channel": "main_pump",
                      "type": "actuator",
                      "metric": "RELAY",
                      "unit": "bool"
                    },
                    {
                      "id": 11,
                      "node_id": 1,
                      "channel": "mister",
                      "type": "actuator",
                      "metric": "RELAY",
                      "unit": "bool"
                    },
                    {
                      "id": 1,
                      "node_id": 1,
                      "channel": "ph",
                      "type": "sensor",
                      "metric": "PH",
                      "unit": "pH"
                    },
                    {
                      "id": 3,
                      "node_id": 1,
                      "channel": "solution_temp_c",
                      "type": "sensor",
                      "metric": "SOLUTION_TEMP_C",
                      "unit": "C"
                    }
                  ]
                }
              ],
              "first_page_url": "http://localhost:8081/api/nodes?page=1",
              "from": 1,
              "last_page": 1,
              "last_page_url": "http://localhost:8081/api/nodes?page=1",
              "links": [
                {
                  "url": null,
                  "label": "&laquo; Previous",
                  "page": null,
                  "active": false
                },
                {
                  "url": "http://localhost:8081/api/nodes?page=1",
                  "label": "1",
                  "page": 1,
                  "active": true
                },
                {
                  "url": null,
                  "label": "Next &raquo;",
                  "page": null,
                  "active": false
                }
              ],
              "next_page_url": null,
              "path": "http://localhost:8081/api/nodes",
              "per_page": 25,
              "prev_page_url": null,
              "to": 1,
              "total": 1
            }
          },
          "test_zone_id": "1",
          "test_node_id": "1",
          "command_response": {
            "status": "ok",
            "data": {
              "command_id": "96bc6911-0e5d-4548-b73e-01573a571d3f"
            }
          },
          "command_id": "96bc6911-0e5d-4548-b73e-01573a571d3f",
          "command_status": [
            {
              "status": "QUEUED"
            }
          ]
        }
      }
    },
    {
      "timestamp": "2025-12-12T22:25:51.894379",
      "type": "ws.subscribe",
      "description": "Executing Subscribe to command channel",
      "data": {
        "channel": "private-commands.1"
      }
    },
    {
      "timestamp": "2025-12-12T22:25:51.995313",
      "type": "ws.subscribe",
      "description": "Completed Subscribe to command channel",
      "data": {
        "duration": 0.10092735290527344,
        "result": {
          "subscribed": "private-commands.1"
        }
      }
    },
    {
      "timestamp": "2025-12-12T22:25:51.995376",
      "type": "ws.subscribe",
      "description": "Executing Subscribe to zone channel",
      "data": {
        "channel": "private-hydro.zones.1"
      }
    },
    {
      "timestamp": "2025-12-12T22:25:52.073127",
      "type": "ws.subscribe",
      "description": "Completed Subscribe to zone channel",
      "data": {
        "duration": 0.0777442455291748,
        "result": {
          "subscribed": "private-hydro.zones.1"
        }
      }
    },
    {
      "timestamp": "2025-12-12T22:25:52.073200",
      "type": "api.post",
      "description": "Executing Send command to node",
      "data": {
        "json": {
          "cmd": "set_relay_state",
          "channel": "main_pump",
          "params": {
            "state": false
          }
        }
      }
    },
    {
      "timestamp": "2025-12-12T22:25:52.162775",
      "type": "api.post",
      "description": "Completed Send command to node",
      "data": {
        "duration": 0.089569091796875,
        "result": {
          "status": "ok",
          "data": {
            "command_id": "96bc6911-0e5d-4548-b73e-01573a571d3f"
          }
        }
      }
    },
    {
      "timestamp": "2025-12-12T22:25:52.162837",
      "type": "set",
      "description": "Executing Save command ID",
      "data": {
        "command_id": "96bc6911-0e5d-4548-b73e-01573a571d3f"
      }
    },
    {
      "timestamp": "2025-12-12T22:25:52.162846",
      "type": "set",
      "description": "Completed Save command ID",
      "data": {
        "duration": 6.198883056640625e-06,
        "result": {
          "TIMESTAMP_S": 1765567551,
          "TIMESTAMP_MS": 1765567551000,
          "health": {
            "status": "ok",
            "data": {
              "app": "ok",
              "db": "ok",
              "mqtt": "ok",
              "history_logger": "ok",
              "automation_engine": "ok",
              "chain": {
                "db": "ok",
                "mqtt": "ok",
                "websocket": "unknown",
                "ui": "ok"
              }
            },
            "meta": {
              "timestamp": "2025-12-12T19:25:51+00:00",
              "db_error": null,
              "checks": {
                "db_timeout": "2s",
                "mqtt_timeout": "2s",
                "history_logger_timeout": "3s",
                "automation_engine_timeout": "2s"
              }
            }
          },
          "zones": {
            "status": "ok",
            "data": {
              "current_page": 1,
              "data": [
                {
                  "id": 1,
                  "greenhouse_id": 1,
                  "name": "E2E Zone 1",
                  "description": "Deterministic zone for E2E scenarios",
                  "status": "offline",
                  "created_at": "2025-12-12T18:45:42.000000Z",
                  "updated_at": "2025-12-12T18:45:42.000000Z",
                  "preset_id": null,
                  "hardware_profile": null,
                  "capabilities": null,
                  "health_score": null,
                  "health_status": null,
                  "uid": "zn-test-1",
                  "settings": null,
                  "nodes_count": 1,
                  "greenhouse": {
                    "id": 1,
                    "name": "E2E Greenhouse"
                  },
                  "preset": null
                }
              ],
              "first_page_url": "http://localhost:8081/api/zones?page=1",
              "from": 1,
              "last_page": 1,
              "last_page_url": "http://localhost:8081/api/zones?page=1",
              "links": [
                {
                  "url": null,
                  "label": "&laquo; Previous",
                  "page": null,
                  "active": false
                },
                {
                  "url": "http://localhost:8081/api/zones?page=1",
                  "label": "1",
                  "page": 1,
                  "active": true
                },
                {
                  "url": null,
                  "label": "Next &raquo;",
                  "page": null,
                  "active": false
                }
              ],
              "next_page_url": null,
              "path": "http://localhost:8081/api/zones",
              "per_page": 25,
              "prev_page_url": null,
              "to": 1,
              "total": 1
            }
          },
          "nodes": {
            "status": "ok",
            "data": {
              "current_page": 1,
              "data": [
                {
                  "id": 1,
                  "uid": "nd-ph-test-1",
                  "name": "E2E Node (pH)",
                  "type": "ph",
                  "zone_id": 1,
                  "status": "online",
                  "lifecycle_state": "ASSIGNED_TO_ZONE",
                  "fw_version": "e2e",
                  "hardware_revision": null,
                  "hardware_id": "esp32-test-001",
                  "validated": false,
                  "first_seen_at": null,
                  "created_at": "2025-12-12T18:45:42.000000Z",
                  "updated_at": "2025-12-12T19:25:34.000000Z",
                  "zone": {
                    "id": 1,
                    "name": "E2E Zone 1",
                    "status": "offline"
                  },
                  "channels": [
                    {
                      "id": 5,
                      "node_id": 1,
                      "channel": "air_rh",
                      "type": "sensor",
                      "metric": "AIR_RH",
                      "unit": "%"
                    },
                    {
                      "id": 4,
                      "node_id": 1,
                      "channel": "air_temp_c",
                      "type": "sensor",
                      "metric": "AIR_TEMP_C",
                      "unit": "C"
                    },
                    {
                      "id": 7,
                      "node_id": 1,
                      "channel": "drain_pump",
                      "type": "actuator",
                      "metric": "RELAY",
                      "unit": "bool"
                    },
                    {
                      "id": 2,
                      "node_id": 1,
                      "channel": "ec",
                      "type": "sensor",
                      "metric": "EC",
                      "unit": "mS/cm"
                    },
                    {
                      "id": 8,
                      "node_id": 1,
                      "channel": "fan",
                      "type": "actuator",
                      "metric": "RELAY",
                      "unit": "bool"
                    },
                    {
                      "id": 9,
                      "node_id": 1,
                      "channel": "heater",
                      "type": "actuator",
                      "metric": "RELAY",
                      "unit": "bool"
                    },
                    {
                      "id": 10,
                      "node_id": 1,
                      "channel": "light",
                      "type": "actuator",
                      "metric": "RELAY",
                      "unit": "bool"
                    },
                    {
                      "id": 6,
                      "node_id": 1,
                      "channel": "main_pump",
                      "type": "actuator",
                      "metric": "RELAY",
                      "unit": "bool"
                    },
                    {
                      "id": 11,
                      "node_id": 1,
                      "channel": "mister",
                      "type": "actuator",
                      "metric": "RELAY",
                      "unit": "bool"
                    },
                    {
                      "id": 1,
                      "node_id": 1,
                      "channel": "ph",
                      "type": "sensor",
                      "metric": "PH",
                      "unit": "pH"
                    },
                    {
                      "id": 3,
                      "node_id": 1,
                      "channel": "solution_temp_c",
                      "type": "sensor",
                      "metric": "SOLUTION_TEMP_C",
                      "unit": "C"
                    }
                  ]
                }
              ],
              "first_page_url": "http://localhost:8081/api/nodes?page=1",
              "from": 1,
              "last_page": 1,
              "last_page_url": "http://localhost:8081/api/nodes?page=1",
              "links": [
                {
                  "url": null,
                  "label": "&laquo; Previous",
                  "page": null,
                  "active": false
                },
                {
                  "url": "http://localhost:8081/api/nodes?page=1",
                  "label": "1",
                  "page": 1,
                  "active": true
                },
                {
                  "url": null,
                  "label": "Next &raquo;",
                  "page": null,
                  "active": false
                }
              ],
              "next_page_url": null,
              "path": "http://localhost:8081/api/nodes",
              "per_page": 25,
              "prev_page_url": null,
              "to": 1,
              "total": 1
            }
          },
          "test_zone_id": "1",
          "test_node_id": "1",
          "command_response": {
            "status": "ok",
            "data": {
              "command_id": "96bc6911-0e5d-4548-b73e-01573a571d3f"
            }
          },
          "command_id": "96bc6911-0e5d-4548-b73e-01573a571d3f",
          "command_status": [
            {
              "status": "QUEUED"
            }
          ]
        }
      }
    },
    {
      "timestamp": "2025-12-12T22:25:52.162880",
      "type": "ws.wait_event",
      "description": "Executing Wait for command status update (SENT)",
      "data": {
        "event": "CommandStatusUpdated",
        "timeout": 5.0
      }
    },
    {
      "timestamp": "2025-12-12T22:25:53.065394",
      "type": "ws.wait_event",
      "description": "Completed Wait for command status update (SENT)",
      "data": {
        "duration": 0.9025089740753174,
        "result": {
          "event": "CommandStatusUpdated",
          "data": "{\"commandId\":\"96bc6911-0e5d-4548-b73e-01573a571d3f\",\"status\":\"QUEUED\",\"message\":\"Command created\",\"error\":null,\"zoneId\":1,\"event_id\":1765567552000000237,\"server_ts\":1765567552000}",
          "channel": "private-commands.1"
        }
      }
    },
    {
      "timestamp": "2025-12-12T22:25:53.065512",
      "type": "db.wait",
      "description": "Executing Check command status in DB",
      "data": {
        "query": "SELECT status FROM commands WHERE cmd_id = :cmd_id",
        "params": {
          "cmd_id": "96bc6911-0e5d-4548-b73e-01573a571d3f"
        },
        "timeout": 5.0,
        "expected_rows": 1
      }
    },
    {
      "timestamp": "2025-12-12T22:25:53.074411",
      "type": "db.wait",
      "description": "Completed Check command status in DB",
      "data": {
        "duration": 0.008893728256225586,
        "result": [
          {
            "status": "QUEUED"
          }
        ]
      }
    },
    {
      "timestamp": "2025-12-12T22:25:53.074527",
      "type": "assert.equals",
      "description": "Executing Assert command status is SENT",
      "data": {
        "actual": "QUEUED",
        "expected": "SENT"
      }
    },
    {
      "timestamp": "2025-12-12T22:25:53.074586",
      "type": "assert.equals",
      "description": "Failed Assert command status is SENT",
      "data": {
        "duration": 2.0503997802734375e-05,
        "error": "Expected SENT, but got QUEUED"
      }
    }
  ],
  "artifacts": {
    "E02_command_happy": {
      "ws_messages": [
        {
          "data": {
            "event": "pusher_internal:subscription_succeeded",
            "data": "{}",
            "channel": "private-commands.1"
          },
          "timestamp": "2025-12-12T22:25:52.018761"
        },
        {
          "data": {
            "event": "pusher_internal:subscription_succeeded",
            "data": "{}",
            "channel": "private-hydro.zones.1"
          },
          "timestamp": "2025-12-12T22:25:52.077454"
        },
        {
          "data": {
            "event": "CommandStatusUpdated",
            "data": "{\"commandId\":\"96bc6911-0e5d-4548-b73e-01573a571d3f\",\"status\":\"QUEUED\",\"message\":\"Command created\",\"error\":null,\"zoneId\":1,\"event_id\":1765567552000000237,\"server_ts\":1765567552000}",
            "channel": "private-commands.1"
          },
          "timestamp": "2025-12-12T22:25:53.031242"
        }
      ],
      "mqtt_messages": [],
      "api_responses": []
    }
  }
}